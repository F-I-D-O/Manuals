<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Maven - Manuals</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
        <link href="../../../extra.css" rel="stylesheet">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">Manuals</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Programming <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">C++</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../C%2B%2B/C%2B%2B%20Debugging%20and%20Profiling/" class="dropdown-item">C++ Debugging and Profiling</a>
</li>
            
<li>
    <a href="../../C%2B%2B/C%2B%2B%20Manual/" class="dropdown-item">C++ Manual</a>
</li>
            
<li>
    <a href="../../C%2B%2B/C%2B%2B%20Workflow/" class="dropdown-item">C++ Workflow</a>
</li>
            
<li>
    <a href="../../C%2B%2B/CMake%20Manual/" class="dropdown-item">CMake Manual</a>
</li>
            
<li>
    <a href="../../C%2B%2B/Google%20Test/" class="dropdown-item">Google Test</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Java</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../Debugging%20Java/" class="dropdown-item">Debugging Java</a>
</li>
            
<li>
    <a href="../Jackson/" class="dropdown-item">Jackson</a>
</li>
            
<li>
    <a href="../Java%20Programming%20Guide/" class="dropdown-item">Java Programming Guide</a>
</li>
            
<li>
    <a href="../Java%20Workflow/" class="dropdown-item">Java Workflow</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Maven</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Python</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Python/Matplotlib%20Manual/" class="dropdown-item">Matplotlib Manual</a>
</li>
            
<li>
    <a href="../../Python/Pandas%20Manual/" class="dropdown-item">Pandas Manual</a>
</li>
            
<li>
    <a href="../../Python/Plotly%20Manual/" class="dropdown-item">Plotly Manual</a>
</li>
            
<li>
    <a href="../../Python/Python%20Debugging/" class="dropdown-item">Python Debugging</a>
</li>
            
<li>
    <a href="../../Python/Python%20Manual/" class="dropdown-item">Python Manual</a>
</li>
            
<li>
    <a href="../../Python/Python%20Workflow/" class="dropdown-item">Python Workflow</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Web</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Web/CSS%20Manual/" class="dropdown-item">CSS Manual</a>
</li>
            
<li>
    <a href="../../Web/css/" class="dropdown-item">css</a>
</li>
            
<li>
    <a href="../../Web/Google%20API%20and%20Apps%20Script/" class="dropdown-item">Google API and Apps Script</a>
</li>
            
<li>
    <a href="../../Web/htaccess/" class="dropdown-item">htaccess</a>
</li>
            
<li>
    <a href="../../Web/JavaScript/" class="dropdown-item">JavaScript</a>
</li>
            
<li>
    <a href="../../Web/Jekyll/" class="dropdown-item">Jekyll</a>
</li>
            
<li>
    <a href="../../Web/mkdocs/" class="dropdown-item">mkdocs</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../../Common/" class="dropdown-item">Common</a>
</li>
                                    
<li>
    <a href="../../Git/" class="dropdown-item">Git</a>
</li>
                                    
<li>
    <a href="../../Gurobi/" class="dropdown-item">Gurobi</a>
</li>
                                    
<li>
    <a href="../../HDF/" class="dropdown-item">HDF</a>
</li>
                                    
<li>
    <a href="../../JSON/" class="dropdown-item">JSON</a>
</li>
                                    
<li>
    <a href="../../Native%20Libraries/" class="dropdown-item">Native Libraries</a>
</li>
                                    
<li>
    <a href="../../PostgreSQL%20Manual/" class="dropdown-item">PostgreSQL Manual</a>
</li>
                                    
<li>
    <a href="../../Regex/" class="dropdown-item">Regex</a>
</li>
                                    
<li>
    <a href="../../Ruby%20Workflow/" class="dropdown-item">Ruby Workflow</a>
</li>
                                    
<li>
    <a href="../../SQL%20Manual/" class="dropdown-item">SQL Manual</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">LaTeX <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../LaTeX/Latex%20manual/" class="dropdown-item">Latex manual</a>
</li>
                                    
<li>
    <a href="../../../LaTeX/LaTeX%20workflow/" class="dropdown-item">LaTeX workflow</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Ubuntu <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../Ubuntu/Linux%20Manual/" class="dropdown-item">Linux Manual</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Windows <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../Windows/Excel%20Manual/" class="dropdown-item">Excel Manual</a>
</li>
                                    
<li>
    <a href="../../../Windows/PowerPoint/" class="dropdown-item">PowerPoint</a>
</li>
                                    
<li>
    <a href="../../../Windows/Powershell%20Manual/" class="dropdown-item">Powershell Manual</a>
</li>
                                    
<li>
    <a href="../../../Windows/VSCode/" class="dropdown-item">VSCode</a>
</li>
                                    
<li>
    <a href="../../../Windows/Windows%20Manual/" class="dropdown-item">Windows Manual</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Audio & Video <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../Audio%20%26%20Video/FFMpeg/" class="dropdown-item">FFMpeg</a>
</li>
                                    
<li>
    <a href="../../../Audio%20%26%20Video/VLC/" class="dropdown-item">VLC</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Cloud computing <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../Cloud%20computing/Lmod/" class="dropdown-item">Lmod</a>
</li>
                                    
<li>
    <a href="../../../Cloud%20computing/RCI%20cluster/" class="dropdown-item">RCI cluster</a>
</li>
                                    
<li>
    <a href="../../../Cloud%20computing/Slurm/" class="dropdown-item">Slurm</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">GIS <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../GIS/Overpass%20Manual/" class="dropdown-item">Overpass Manual</a>
</li>
                                    
<li>
    <a href="../../../GIS/QGIS/" class="dropdown-item">QGIS</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Images <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../Images/Midjourney/" class="dropdown-item">Midjourney</a>
</li>
                                    
<li>
    <a href="../../../Images/Photopea/" class="dropdown-item">Photopea</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../../Arxiv/" class="nav-link">Arxiv</a>
                            </li>
                            <li class="navitem">
                                <a href="../../.." class="nav-link">index</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../Markdown/" class="nav-link">Markdown</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../Network/" class="nav-link">Network</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../Security/" class="nav-link">Security</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../vscode/" class="nav-link">vscode</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../Web%20Tricks/" class="nav-link">Web Tricks</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../Java%20Workflow/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../../Python/Matplotlib%20Manual/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#maven-packages-artifacts" class="nav-link">Maven Packages: Artifacts</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#list-locally-installed-artifacts" class="nav-link">List locally installed artifacts</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#install-artifacts-from-a-remote-repository-manually" class="nav-link">Install artifacts from a remote repository manually</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#debugging-missing-artifacts" class="nav-link">Debugging missing Artifacts</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#variables" class="nav-link">Variables</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#compilation" class="nav-link">Compilation</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#passing-arguments-to-javac" class="nav-link">Passing arguments to javac</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#dependencies" class="nav-link">Dependencies</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#using-dependencies-distributed-as-a-jar" class="nav-link">Using dependencies distributed as a jar</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#using-dependencies-distributed-as-a-zip" class="nav-link">Using dependencies distributed as a zip</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#tests" class="nav-link">Tests</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#test-configuration" class="nav-link">Test configuration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#run-a-single-tests-file" class="nav-link">Run a single tests file</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#run-tests-using-a-pattern" class="nav-link">Run tests using a pattern</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#execute-programs-from-maven" class="nav-link">Execute Programs from Maven</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#execjava" class="nav-link">exec:java</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#execexec" class="nav-link">exec:exec</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#configure-the-exec-plugin-in-the-pom" class="nav-link">Configure the exec plugin in the pom</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#https-certificates" class="nav-link">HTTPS certificates</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#adding-a-new-ssl-certificate-to-your-keystore" class="nav-link">Adding a new SSL certificate to your keystore</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#debugging-maven" class="nav-link">Debugging maven</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#no-tests-found-using-the-dtest-argument-of-the-test-goal" class="nav-link">No tests found using the Dtest argument of the test goal</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#uncompilable-source-code" class="nav-link">uncompilable  source code</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#project-publishing" class="nav-link">Project Publishing</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#cleanup" class="nav-link">Cleanup</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#add-license-information" class="nav-link">Add license information:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#updating-poms" class="nav-link">Updating poms</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#deploying-the-project-to-maven-central" class="nav-link">Deploying the project to Maven Central</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#deploying-artifacts-to-ossrh" class="nav-link">Deploying artifacts to OSSRH</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="4"><a href="#required-metadata" class="nav-link">Required metadata</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="4"><a href="#javadoc-and-sources-setup" class="nav-link">Javadoc and sources setup</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="4"><a href="#signing-the-artifacts-with-gpg" class="nav-link">Signing the artifacts with GPG</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="5"><a href="#storing-the-gpg-passphrase" class="nav-link">Storing the GPG passphrase</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="4"><a href="#required-plugins-and-configuration" class="nav-link">Required plugins and configuration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="4"><a href="#setting-up-user-authentication-for-the-ossrh" class="nav-link">Setting up user authentication for the OSSRH</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#profiles" class="nav-link">Profiles</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#displaying-active-profiles" class="nav-link">Displaying active profiles</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#creating-maven-plugins" class="nav-link">Creating maven plugins</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#testing-a-maven-plugin" class="nav-link">Testing a maven plugin</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#debugging-a-maven-plugin-in-intellij-idea" class="nav-link">Debugging a maven plugin in IntelliJ IDEA</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#make-the-plugin-runnable-from-any-directory" class="nav-link">Make the plugin runnable from any directory</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#various-useful-tasks" class="nav-link">Various useful tasks</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#displaying-the-classpath" class="nav-link">Displaying the classpath</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p>Maven is a dependency management and build tool for Java. </p>
<p>The project configuration for Maven is stored in a single file called <code>pom.xml</code>. Both the project dependencies and the build configuration are stored in this file.</p>
<p>The maven is executed using the as <code>mvn &lt;goal&gt;</code>. Typical goals are</p>
<ul>
<li><code>compile</code>: compile the project</li>
<li><code>test</code>: run tests</li>
<li><code>package</code>: package the project into a jar or war file</li>
<li><code>install</code>: install the project into the local maven repository</li>
<li><code>deploy</code>: deploy the project to a remote repository</li>
</ul>
<h1 id="maven-packages-artifacts">Maven Packages: Artifacts<a class="headerlink" href="#maven-packages-artifacts" title="Permanent link">&para;</a></h1>
<p>All Maven dependencies and plugins installed in local system repositories can be either:</p>
<ul>
<li>downloaded from a remote repository</li>
<li>installed from a local file or project</li>
</ul>
<p>Note that if we want the artifact to be downloaded from a remote repository, we do not have to take any action. It will be downloaded automatically when needed.</p>
<p>By default, Maven searches for artifacts in the <a href="https://central.sonatype.com/">Maven Central repository</a>. If we want to use a different repository, we have to add it manually.</p>
<h2 id="list-locally-installed-artifacts">List locally installed artifacts<a class="headerlink" href="#list-locally-installed-artifacts" title="Permanent link">&para;</a></h2>
<p>There is no built-in command to list all locally installed artifacts. However, we can use the <a href="https://github.com/F-I-D-O/info-maven-plugin">info plugin</a>:</p>
<pre><code class="language-bash">mvn ninja.fido:info-maven-plugin:list
</code></pre>
<h2 id="install-artifacts-from-a-remote-repository-manually">Install artifacts from a remote repository manually<a class="headerlink" href="#install-artifacts-from-a-remote-repository-manually" title="Permanent link">&para;</a></h2>
<p>If we want to install an artifact from a remote repository manually, we can use the <code>dependency:get</code> goal. The syntax is as follows:</p>
<pre><code class="language-bash">mvn dependency:get -Dartifact=&lt;GROUP ID&gt;:&lt;ARTIFACT ID&gt;:&lt;VERSION&gt;
</code></pre>
<h2 id="debugging-missing-artifacts">Debugging missing Artifacts<a class="headerlink" href="#debugging-missing-artifacts" title="Permanent link">&para;</a></h2>
<p>All Maven dependencies should work out of the box. If some dependencies cannot be resolved:</p>
<ul>
<li>check that the dependencies are on the maven central.</li>
<li>if not, check that they are in some special repo and check that the repo is present in the pom of the project that requires the dependency</li>
</ul>
<h1 id="variables">Variables<a class="headerlink" href="#variables" title="Permanent link">&para;</a></h1>
<p>Variables in the <code>pom.xml</code> file can be used using the <code>${variable}</code> syntax. </p>
<p>To use some environment variables, we can use the <code>${env.variable}</code>.</p>
<p>Note that contrary to all expectations, <strong>maven goals do not fail if a variable is not defined</strong>. Instead, the variable is replaced with an empty string. This can lead to unexpected behavior, so it is usually preferable to fail. For that, we can use the <a href="https://maven.apache.org/enforcer/">enforcer plugin</a> with the <code>requireProperty</code> rule:</p>
<pre><code class="language-XML">&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-enforcer-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.4.1&lt;/version&gt;
    &lt;executions&gt;
    &lt;execution&gt;
        &lt;id&gt;enforce-property&lt;/id&gt;
        &lt;goals&gt;
            &lt;goal&gt;enforce&lt;/goal&gt;
        &lt;/goals&gt;
        &lt;configuration&gt;
            &lt;rules&gt;
                &lt;requireProperty&gt;
                    &lt;property&gt;basedir&lt;/property&gt;
                    &lt;message&gt;You must set a basedir property!&lt;/message&gt;
                &lt;/requireProperty&gt;
            &lt;/rules&gt;
            &lt;fail&gt;true&lt;/fail&gt;
        &lt;/configuration&gt;
    &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
</code></pre>
<h1 id="compilation">Compilation<a class="headerlink" href="#compilation" title="Permanent link">&para;</a></h1>
<p><a href="https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html">reference</a></p>
<p>Compilation is handeled by the Maven compiler plugin. Usually, typing <code>mvn compile</code> is enough to compile the project.</p>
<p>If you need any customization, add it to the compiler plugin configuration</p>
<pre><code class="language-XML">&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.10.1&lt;/version&gt;
    &lt;configuration&gt;
        ....
    &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre>
<h2 id="passing-arguments-to-javac">Passing arguments to <code>javac</code><a class="headerlink" href="#passing-arguments-to-javac" title="Permanent link">&para;</a></h2>
<p>A single argument can be passed using the <code>&lt;compilerArgument&gt;</code> property. For more compiler arguments, use <code>&lt;compilerArgs&gt;</code>:</p>
<pre><code class="language-XML">&lt;compilerArgs&gt;
    &lt;arg&gt;-Xmaxerrs=1000&lt;/arg&gt;
    &lt;arg&gt;-Xlint&lt;/arg&gt;
&lt;/compilerArgs&gt;

</code></pre>
<h1 id="dependencies">Dependencies<a class="headerlink" href="#dependencies" title="Permanent link">&para;</a></h1>
<p>Maven dependencies are defined in the <code>pom.xml</code> file, in the <code>&lt;dependencies&gt;</code> section. Each dependency has the following structure:</p>
<pre><code class="language-XML">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;
    &lt;artifactId&gt;maven-core&lt;/artifactId&gt;
    &lt;version&gt;3.0&lt;/version&gt;
    &lt;scope&gt;compile&lt;/scope&gt;
&lt;/dependency&gt; 
</code></pre>
<p>The <code>scope</code> property is optional and the default value is <code>compile</code>. </p>
<p>The dependencies are automatically downloaded if we run a maven goal that requires them (e.g., <code>compile</code>, <code>test</code>, <code>install</code>). If we want to download them manually, we can use the <code>dependency:resolve</code> goal.</p>
<p>To list all dependencies of a project, we can use the <code>dependency:list</code> goal.</p>
<h2 id="using-dependencies-distributed-as-a-jar">Using dependencies distributed as a jar<a class="headerlink" href="#using-dependencies-distributed-as-a-jar" title="Permanent link">&para;</a></h2>
<p>Sometimes, we possess a jar file that is not present in any maven repository. We can still install it to the local repository as a new artifact using the <code>install:install-file</code> goal:</p>
<pre><code class="language-bash">mvn install:install-file -Dfile=&lt;PATH TO JAR&gt; -DgroupId=&lt;GROUP ID&gt; -DartifactId=&lt;ARTEIFACT ID&gt; -Dversion=&lt;VERSION&gt; -Dpackaging=jar
</code></pre>
<p>Here the <code>&lt;PATH TO JAR&gt;</code> is a path to the jar library. The <code>&lt;GROUP ID&gt;</code>, <code>&lt;ARTEIFACT ID&gt;</code>, and <code>&lt;VERSION&gt;</code> can have arbitrary values, they just have to correspond with the values specified in the pom dependency.</p>
<p>Be careful with PowerShell: in PowerShell, program parameters starting with minus and containing dot need to be quoted, for example: <code>'-DgroupId=com.example.app'</code> instead of <code>-DgroupId=com.example.app</code></p>
<h2 id="using-dependencies-distributed-as-a-zip">Using dependencies distributed as a zip<a class="headerlink" href="#using-dependencies-distributed-as-a-zip" title="Permanent link">&para;</a></h2>
<p>Sometimes, the dependency is distributed as a zip file containing sources.
Typically, the manual for such a library tells us to modify the classpath to include the sources. However, Maven handles the classpath automatically, so it is not wise to modify it manually. The best way to use it is to unpack the zip and add the sources to the project during compilation. For that, we can use the <code>build-helper-maven-plugin</code> plugin:</p>
<pre><code class="language-XML">&lt;plugin&gt;
    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
    &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.2.0&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;add-lib-sources&lt;/id&gt;
            &lt;phase&gt;generate-sources&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;add-source&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
                &lt;sources&gt;
                    &lt;source&gt;path/to/lib/folder&lt;/source&gt;
                &lt;/sources&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
</code></pre>
<h1 id="tests">Tests<a class="headerlink" href="#tests" title="Permanent link">&para;</a></h1>
<p>Tests are usually executed with the Maven Surefire plugin using the <code>test</code> goal.</p>
<h2 id="test-configuration">Test configuration<a class="headerlink" href="#test-configuration" title="Permanent link">&para;</a></h2>
<p>Tests are run using the <a href="https://maven.apache.org/surefire/maven-surefire-plugin/">Maven Surefire plugin</a>. Usually, the default configuration is enough. However, if we want to customize the test execution, we can add the plugin to our pom and configure it:</p>
<pre><code class="language-XML">&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
            &lt;version&gt;3.0.0-M5&lt;/version&gt;
            &lt;configuration&gt;
                ... configuration ...
            &lt;/configuration&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
    ... other plugins ...
&lt;/build&gt;
</code></pre>
<p>For example, to exclude some tests, the following configuration can be used:</p>
<pre><code class="language-XML">&lt;configuration&gt;
    &lt;excludes&gt;
        &lt;exclude&gt;**/IncompleteTest.java&lt;/exclude&gt;
    &lt;/excludes&gt;
&lt;/configuration&gt;
</code></pre>
<h2 id="run-a-single-tests-file">Run a single tests file<a class="headerlink" href="#run-a-single-tests-file" title="Permanent link">&para;</a></h2>
<p>To run a single test file, use:</p>
<pre><code>mvn test -Dtest=&quot;&lt;TEST CLASS NAME&gt;&quot;
</code></pre>
<p>The name should be just a class name without the package and without file extension:</p>
<pre><code>mvn test -Dtest=&quot;OSMFileTest&quot;
</code></pre>
<p>We can also use a fully qualified name, if there are more test classes with the same name:</p>
<pre><code>mvn test -Dtest=&quot;cz.cvut.fel.aic.roadgraphtool.procedures.input.OSMFileTest&quot;
</code></pre>
<h2 id="run-tests-using-a-pattern">Run tests using a pattern<a class="headerlink" href="#run-tests-using-a-pattern" title="Permanent link">&para;</a></h2>
<p>More test can be run with a pattern, for example:</p>
<pre><code>mvn test -Dtest=&quot;cz.cvut.fel.aic.roadgraphtool.procedures.input.**&quot;
</code></pre>
<p>runs all tests within the <code>input</code> package.</p>
<h1 id="execute-programs-from-maven">Execute Programs from Maven<a class="headerlink" href="#execute-programs-from-maven" title="Permanent link">&para;</a></h1>
<p>For executing programs, Maven has the <code>exec</code> plugin. This plugin has two goals: </p>
<ul>
<li><code>exec:java</code>: for Java programs</li>
<li><code>exec:exec</code>: for any program</li>
</ul>
<p>However, the <code>exec:java</code> goal is not very flexible. It uses the same JVM as the calling Maven process, so the JVM cannot be configured in any way. Notably, with the <code>exec:java</code> goal, it is not possible to:</p>
<ul>
<li>pass JVM arguments like <code>-Xmx</code></li>
<li>set the library path using <code>-Djava.library.path</code></li>
</ul>
<p>Note that when working with PowerShell, we typically encounter the problem with arguments that start with <code>-</code> and contain a dot. For guide how to solve this, refer to the <a href="../../../Windows/Powershell%20Manual/">PowerShell manual</a>.</p>
<h2 id="execjava"><code>exec:java</code><a class="headerlink" href="#execjava" title="Permanent link">&para;</a></h2>
<p>Basic example:</p>
<pre><code>mvn exec:java  -Dexec.mainClass=test.Main
</code></pre>
<p>Other usefull arguments:
 - <code>-Dexec.args="arg1 arg2 arg3"</code></p>
<h2 id="execexec"><code>exec:exec</code><a class="headerlink" href="#execexec" title="Permanent link">&para;</a></h2>
<p>Basic example:</p>
<pre><code>mvn exec:exec -Dexec.executable=&quot;java&quot; -Dexec.args=&quot;Xmx30g -classpath %classpath test.Main&quot;
</code></pre>
<p>The <code>-classpath %classpath</code> argument is obligatory and it is used to pass the project classpath to the program. </p>
<p><strong>Note that here, the <code>-Dexec.args</code> parameter is used both for vm and program arguments.</strong> The order is:</p>
<ol>
<li>JVM arguments, classpath</li>
<li>main class</li>
<li>program arguments
Example:</li>
</ol>
<pre><code>mvn exec:exec -Dexec.executable=&quot;java&quot; -Dexec.args=&quot;-Xmx30g -classpath %classpath test.Main arg1 arg2&quot;
</code></pre>
<p>We can also use <code>-Dexec.mainClass</code> with <code>exec:exec</code>, but we need to refer it in the <code>-classpath</code> argument. The following three maven commands run the same Java program:</p>
<pre><code>mvn exec:java  -Dexec.mainClass=test.Main

mvn exec:exec -Dexec.executable=&quot;java&quot; -Dexec.args=&quot;-classpath %classpath test.Main&quot;

mvn exec:exec -Dexec.executable=&quot;java&quot; -Dexec.mainClass=test.Main -Dexec.args=&quot;-classpath %classpath ${exec.mainClass}&quot;
</code></pre>
<h2 id="configure-the-exec-plugin-in-the-pom">Configure the exec plugin in the pom<a class="headerlink" href="#configure-the-exec-plugin-in-the-pom" title="Permanent link">&para;</a></h2>
<p>We can add a configuration of the exec plugin to the <code>pom.xml</code>, so we do not have to type the arguments or the main class every time we run the program. However, this way, we have to supply all program arguments in the <code>pom.xml</code> file. <strong>It is not possible to pass some parameters from the command line and some from the <code>pom.xml</code> file configuration.</strong> Note that when using the <code>exec:ecec</code> goal, this includes the JVM arguments as well.</p>
<h1 id="https-certificates">HTTPS certificates<a class="headerlink" href="#https-certificates" title="Permanent link">&para;</a></h1>
<p>Sometimes, it can happen that maven cannot connect to a repository with this error:</p>
<pre><code>PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
</code></pre>
<p>This error signals that the server SSL certificate of the maven repo (when using HTTPS) is not present in the local SSL certificate keystore. This can have two reasons, to disintiguish between them, try to access the repo from your browser over https:</p>
<ul>
<li>If you can access the repo from your browser, it means that the server has a valid SSL certificate, but it is not in zour local keystore (just in the browser keystore). You can solve this problem by adding the certificate to your java SSL keystore (see below).</li>
<li>if you cannot access the server from your browser, it is likely that the server does not have a valid SSL certificate, and you have to solve it on the serer side.</li>
</ul>
<h2 id="adding-a-new-ssl-certificate-to-your-keystore">Adding a new SSL certificate to your keystore<a class="headerlink" href="#adding-a-new-ssl-certificate-to-your-keystore" title="Permanent link">&para;</a></h2>
<ol>
<li>Open the repo URL in your browser </li>
<li>Export the certificate:<ul>
<li>Chrome: click on the padlock icon left to address in address bar, select <code>Certificate -&gt; Details -&gt; Copy to File</code> and save in format "Der-encoded binary, single certificate".</li>
<li>Firefox: click on HTTPS certificate chain (the lock icon right next to URL address). Click <code>more info -&gt; security -&gt; show certificate -&gt; details -&gt; export..</code>. Pickup the name and choose file type <code>*.cer</code></li>
</ul>
</li>
<li>Determine the keystore location:
    3.1 Using <code>maven --version</code>, find out the location of the java used by Maven
    3.2 The keystore is saved in file:<code>&lt;JAVA LOCATION&gt;/lib/security/cacerts</code></li>
<li>Open console as administrator and add the certificate to the keystore using:</li>
</ol>
<pre><code>keytool -import -keystore &quot;&lt;PATH TO cacerts&gt;&quot; -file &quot;PATH TO TH EXPORTED *.cer FILE&quot;
</code></pre>
<p>You can check that the operation was sucessful by listing all certificates:</p>
<pre><code>keytool -keystore &quot;&lt;PATH TO cacerts&gt;&quot; -list
</code></pre>
<h1 id="debugging-maven">Debugging maven<a class="headerlink" href="#debugging-maven" title="Permanent link">&para;</a></h1>
<p>First, try to look at the versions of related dependencies and plugins. Old versions of these can cause many problems.</p>
<h2 id="no-tests-found-using-the-dtest-argument-of-the-test-goal">No tests found using the <code>Dtest</code> argument of the <code>test</code> goal<a class="headerlink" href="#no-tests-found-using-the-dtest-argument-of-the-test-goal" title="Permanent link">&para;</a></h2>
<ol>
<li>Check the class name/path/pattern</li>
<li>If the name works, but pattern does not, it can be caused by an old version of the surefire plugin that use a different patten syntax.</li>
</ol>
<h2 id="uncompilable-source-code">uncompilable  source code<a class="headerlink" href="#uncompilable-source-code" title="Permanent link">&para;</a></h2>
<p>Try to clean and compile again</p>
<h1 id="project-publishing">Project Publishing<a class="headerlink" href="#project-publishing" title="Permanent link">&para;</a></h1>
<p>This section s focused on Maven projects but most of the steps should apply to all Java projects.</p>
<p>Steps:</p>
<ol>
<li>Cleanup</li>
<li>Add License to all files</li>
<li>Test</li>
<li>Update Changelog</li>
<li>Update pom of the project and related projects</li>
<li>Install Locally</li>
<li>Deploy</li>
</ol>
<h2 id="cleanup">Cleanup<a class="headerlink" href="#cleanup" title="Permanent link">&para;</a></h2>
<p>The following cleanup steps should be done:</p>
<ul>
<li>clean garbage/IDE files<ul>
<li>check that they are in gitignore</li>
<li>remove already tracked files by <code>git rm -r --cached &lt;path&gt;</code></li>
</ul>
</li>
<li>remove unused imports<ul>
<li>In Netbeans: <code>Refactor</code> -&gt; <code>Inspect and Transform</code> -&gt; <code>browse</code> -&gt; <code>imports</code> -&gt; <code>organize imports</code></li>
</ul>
</li>
</ul>
<h2 id="add-license-information">Add license information:<a class="headerlink" href="#add-license-information" title="Permanent link">&para;</a></h2>
<p>There is a nice program called <a href="https://github.com/johann-petrak/licenseheaders">licenseheaders</a> that can be used for that. Unfortunatelly, <strong>the program is currently broken and a <a href="https://github.com/F-I-D-O/licenseheaders">fork</a> must be used</strong>. Syntax:</p>
<pre><code class="language-bash">licenseheaders -t &lt;license type&gt; -o &quot;&lt;Owner&gt;&quot; -cy -n &lt;Software name&gt; -u &quot;&lt;link to github&gt;&quot; 
</code></pre>
<p>A full path to a license template has to be given.</p>
<h2 id="updating-poms">Updating poms<a class="headerlink" href="#updating-poms" title="Permanent link">&para;</a></h2>
<p>In general, it is desirable to update the version of each related project from SNAPSHOT to the release version and then test the whole setup.</p>
<p>In complex setups, we need to:</p>
<ol>
<li>Change the version of the parent project</li>
<li>Change the version of the project's dependencies</li>
<li>Change the version of the project itself</li>
<li>Update the versions of projects in parent pom</li>
<li>Update the versions of projects in the dependency section of each related project (if this is not done by the parent pom)</li>
</ol>
<p>If we fullfill all these steps, we can deploy the project. Both SNAPSHOTs and releases can be deployed using the <code>deploy</code> goal. The repository is chosen based on the version of the artifact (SNAPSHOT or release).</p>
<h2 id="deploying-the-project-to-maven-central">Deploying the project to Maven Central<a class="headerlink" href="#deploying-the-project-to-maven-central" title="Permanent link">&para;</a></h2>
<p>Deploying to Maven Central has many advantages: it is free, reliable, and every maven user can get our artifact without any additional configuration. However, it is also a bit complicated due to security requirements and high quality standards. </p>
<p>The process is usually as follows:</p>
<ol>
<li>namespace (groupId) registration</li>
<li>deploying of artifacts to the namespace</li>
</ol>
<p>Note that <strong>for one group id registration, we can deploy multiple artifacts, as long as the registered group id is equal to, or a prefix of, the group id of the artifact</strong>.</p>
<p>The whole process is described in detail in the <a href="https://central-stage.sonatype.org/register/central-portal/">Central Repository Documentation</a>. As of 2024-02-15, there is an ongoing migration from OSSRH to the new Central Portal. Because of that, we will describe the current (OSSRH) process only briefly, as it is likely to change in the future. Also, we will describe only the process for deploying artifacts, as the namespace registration in OSSRH is not possible anymore.</p>
<p><strong>To see your currently registered namespaces, go to the <a href="https://issues.sonatype.org/secure/ViewProfile.jspa">your profile at sonatype Jira portal</a> and look insides the issues listed on right in the Activity Stream.</strong></p>
<h3 id="deploying-artifacts-to-ossrh">Deploying artifacts to OSSRH<a class="headerlink" href="#deploying-artifacts-to-ossrh" title="Permanent link">&para;</a></h3>
<p>Requirements:</p>
<ul>
<li>required metadata in the pom </li>
<li>javadoc and sources must be supplied</li>
<li>all files must be signed with GPG</li>
<li>various plugins and configuration need to be set up in the pom</li>
<li>user authentication for the OSSRH must be set up in the <code>settings.xml</code> file</li>
</ul>
<h4 id="required-metadata">Required metadata<a class="headerlink" href="#required-metadata" title="Permanent link">&para;</a></h4>
<p><a href="https://central.sonatype.org/pages/requirements">Official documentation</a> (at the end)</p>
<p>The following metadata must be present in the pom:</p>
<ul>
<li>project tags:<ul>
<li><code>name</code></li>
<li><code>description</code></li>
<li><code>url</code></li>
</ul>
</li>
<li>
<p>license information:
    ```XML
    <licenses>
        <license>
            <name>MIT License</name>
            <url>https://opensource.org/licenses/MIT</url>
        </license>
    </licenses></p>
</li>
<li>
<p>developer information:
    <code>XML
    &lt;developers&gt;
        &lt;developer&gt;
            &lt;name&gt;Full Name&lt;/name&gt;
            &lt;email&gt;user email&lt;/email&gt;
            &lt;url&gt;user url&lt;/url&gt;
        &lt;/developer&gt;
    &lt;/developers&gt;</code></p>
</li>
<li>
<p>scm information:
    <code>XML
    &lt;scm&gt;
        &lt;connection&gt;scm:git:git://github.com/simpligility/ossrh-demo.git&lt;/connection&gt;
        &lt;developerConnection&gt;scm:git:ssh://github.com:simpligility/ossrh-demo.git&lt;/developerConnection&gt;
        &lt;url&gt;http://github.com/simpligility/ossrh-demo/tree/master&lt;/url&gt;
    &lt;/scm&gt;</code></p>
</li>
</ul>
<h4 id="javadoc-and-sources-setup">Javadoc and sources setup<a class="headerlink" href="#javadoc-and-sources-setup" title="Permanent link">&para;</a></h4>
<p>The following configuration is suitable for deploying with sources and javadoc:</p>
<pre><code class="language-XML">&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;
    &lt;version&gt;2.2.1&lt;/version&gt;
    &lt;executions&gt;
    &lt;execution&gt;
        &lt;id&gt;attach-sources&lt;/id&gt;
        &lt;goals&gt;
        &lt;goal&gt;jar-no-fork&lt;/goal&gt;
        &lt;/goals&gt;
    &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;
    &lt;version&gt;2.9.1&lt;/version&gt;
    &lt;executions&gt;
    &lt;execution&gt;
        &lt;id&gt;attach-javadocs&lt;/id&gt;
        &lt;goals&gt;
        &lt;goal&gt;jar&lt;/goal&gt;
        &lt;/goals&gt;
    &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
</code></pre>
<h4 id="signing-the-artifacts-with-gpg">Signing the artifacts with GPG<a class="headerlink" href="#signing-the-artifacts-with-gpg" title="Permanent link">&para;</a></h4>
<p>To sign the artifacts with GPG, we need to  add the gp plugin to the pom:</p>
<pre><code class="language-XML">&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-gpg-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.5&lt;/version&gt;
    &lt;executions&gt;
    &lt;execution&gt;
        &lt;id&gt;sign-artifacts&lt;/id&gt;
        &lt;phase&gt;verify&lt;/phase&gt;
        &lt;goals&gt;
            &lt;goal&gt;sign&lt;/goal&gt;
        &lt;/goals&gt;
    &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
</code></pre>
<p>For this plugin to work, the GPG must be installed and available in the system path.</p>
<h5 id="storing-the-gpg-passphrase">Storing the GPG passphrase<a class="headerlink" href="#storing-the-gpg-passphrase" title="Permanent link">&para;</a></h5>
<p>To make our life easier, we can store the GPG passphrase in the <code>settings.xml</code> file. The following configuration must be present in the <code>profiles</code> section:</p>
<pre><code class="language-XML">&lt;profile&gt;
    &lt;id&gt;ossrh&lt;/id&gt;
    &lt;activation&gt;
        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
    &lt;/activation&gt;
    &lt;properties&gt;
        &lt;gpg.executable&gt;gpg&lt;/gpg.executable&gt; &lt;!-- this should not be needed as gpg is default... --&gt;
        &lt;gpg.passphrase&gt;F1D06949&lt;/gpg.passphrase&gt;
    &lt;/properties&gt;
&lt;/profile&gt;
</code></pre>
<h4 id="required-plugins-and-configuration">Required plugins and configuration<a class="headerlink" href="#required-plugins-and-configuration" title="Permanent link">&para;</a></h4>
<p>For the deployment to OSSRH, we need to use several plugins and add some configuration to the pom. First, we need to set up the distribution management:</p>
<pre><code class="language-XML">&lt;distributionManagement&gt;
    &lt;snapshotRepository&gt;
        &lt;id&gt;ossrh&lt;/id&gt;
        &lt;url&gt;&lt;SNAPSHOT URL&gt;&lt;/url&gt;
    &lt;/snapshotRepository&gt;
    &lt;repository&gt;
        &lt;id&gt;ossrh&lt;/id&gt;
        &lt;url&gt;&lt;RELEASE URL&gt;&lt;/url&gt;
    &lt;/repository&gt;
&lt;/distributionManagement&gt; 
</code></pre>
<p>The <SNAPSHOT URL> and <RELEASE URL> are links to the repo we have received after the namespace registration approval. Note that we need to use the original URLs, even if they do not match the links in the documentation. The current (2024-02-15) URLs are:</p>
<ul>
<li>https://s01.oss.sonatype.org/content/repositories/snapshots</li>
<li>https://s01.oss.sonatype.org/service/local/staging/deploy/maven2/</li>
</ul>
<p>Next, we need a staging plugin to deploy the artifacts to the OSSRH staging repository. The plugin is configured as follows:</p>
<pre><code class="language-XML">&lt;plugin&gt;
    &lt;groupId&gt;org.sonatype.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;nexus-staging-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;&lt;latest version here&gt;&lt;/version&gt;
    &lt;extensions&gt;true&lt;/extensions&gt;
    &lt;configuration&gt;
        &lt;serverId&gt;ossrh&lt;/serverId&gt;
        &lt;nexusUrl&gt;&lt;REPO ROOT URL&gt;&lt;/nexusUrl&gt;
        &lt;autoReleaseAfterClose&gt;true&lt;/autoReleaseAfterClose&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre>
<p>Here, the <code>&lt;REPO ROOT URL&gt;</code> is the root URL of the repositories above, e.g., for recent versions, it is <code>https://s01.oss.sonatype.org/</code>.</p>
<h4 id="setting-up-user-authentication-for-the-ossrh">Setting up user authentication for the OSSRH<a class="headerlink" href="#setting-up-user-authentication-for-the-ossrh" title="Permanent link">&para;</a></h4>
<p>The following configuration must be present in the <code>settings.xml</code> file:</p>
<pre><code class="language-XML">&lt;servers&gt;
    &lt;server&gt;
        &lt;id&gt;ossrh&lt;/id&gt;
        &lt;username&gt;your username&lt;/username&gt;
        &lt;password&gt;your password&lt;/password&gt;
    &lt;/server&gt;
&lt;/servers&gt;
</code></pre>
<h1 id="profiles">Profiles<a class="headerlink" href="#profiles" title="Permanent link">&para;</a></h1>
<p>Maven profiles can be used to supply different configurations in a single <code>pom.xml</code> file. This can be used for example to:</p>
<ul>
<li>support different build environments (e.g., development, testing, production)</li>
<li>support different build targets (e.g., different Java versions)</li>
<li>support different build configurations (e.g., optional dependencies)</li>
</ul>
<p>Profiles are defined in the <code>profiles</code> section of the <code>pom.xml</code> file. Each profile has a unique id and can contain any configuration that can be present in the <code>pom.xml</code> file. </p>
<p>To manually activate a profile, we can use the <code>-P</code> argument of the <code>mvn</code> command:</p>
<pre><code>mvn &lt;goal&gt; -P &lt;profile id&gt;
</code></pre>
<p>Note that <strong>the profile needs to be selected for all relevant goals, not just for the compilation</strong>. For example, if we have and optional dependency in the profile, we need to select the profile for <code>compile</code>, but also for <code>exec</code>, <code>install</code>, etc, otherwise the dependency will not be found at runtime.</p>
<h2 id="displaying-active-profiles">Displaying active profiles<a class="headerlink" href="#displaying-active-profiles" title="Permanent link">&para;</a></h2>
<p>To display the active profiles, use the following command:</p>
<pre><code>mvn help:active-profiles
</code></pre>
<p>Note that again, this will only show the profiles that are activated in the <code>settings.xml</code> file or the profiles that are activated by default. To test an optional profile, we need to activate it even for the <code>help:active-profiles</code> goal:</p>
<pre><code>mvn help:active-profiles -P &lt;profile id&gt;
</code></pre>
<h1 id="creating-maven-plugins">Creating maven plugins<a class="headerlink" href="#creating-maven-plugins" title="Permanent link">&para;</a></h1>
<p><a href="https://maven.apache.org/guides/plugin/guide-java-plugin-development.html">Official guide</a></p>
<p>Maven plugins can be created as maven projects. Specifics <code>pom</code> configuration:</p>
<ul>
<li>The packaging is <code>maven-plugin</code></li>
<li>The name of the plugin is <code>&lt;artifactId&gt;-maven-plugin</code></li>
<li>among the dependencies, there should be <code>maven-plugin-api</code> and <code>maven-plugin-annotations</code></li>
</ul>
<p>To use a cclass method as an entry point for a plugin goal, we annotate it with <code>@Mojo(name = "&lt;goal name&gt;")</code>.</p>
<h2 id="testing-a-maven-plugin">Testing a maven plugin<a class="headerlink" href="#testing-a-maven-plugin" title="Permanent link">&para;</a></h2>
<p>The best way to test the plugin is to run it separately, even if it should be later bound to a lifecycle phase. To run the plugin, we use the following syntax:</p>
<pre><code>mvn &lt;group id&gt;:&lt;artifact id&gt;:&lt;goal name&gt;
# Example:
mvn com.test:example-maven-plugin:example
</code></pre>
<p>This is indeed very verbose. To shorten it, we can add a special configuration to the system <code>settings.xml</code> file:</p>
<pre><code class="language-XML">&lt;pluginGroups&gt;
    &lt;pluginGroup&gt;com.test&lt;/pluginGroup&gt;
&lt;/pluginGroups&gt;
</code></pre>
<p>Now, we can run the plugin using:</p>
<pre><code>mvn example:example
</code></pre>
<h2 id="debugging-a-maven-plugin-in-intellij-idea">Debugging a maven plugin in IntelliJ IDEA<a class="headerlink" href="#debugging-a-maven-plugin-in-intellij-idea" title="Permanent link">&para;</a></h2>
<p>Maven plugins can be easily debugged in IntelliJ IDEA. However, it is important to understand that unlike maven plugins are run from the local repository, not from the project source code. Therefore, <strong>we need to install the plugin after each change</strong>.</p>
<h2 id="make-the-plugin-runnable-from-any-directory">Make the plugin runnable from any directory<a class="headerlink" href="#make-the-plugin-runnable-from-any-directory" title="Permanent link">&para;</a></h2>
<p>Normally, the goals can be run only from project directories (where the <code>pom.xml</code> is present). To make the plugin runnable from any directory, we need to annotate the goal with <code>@requiresProject = false</code>:</p>
<pre><code class="language-Java">@Mojo(name = &quot;example&quot;, requiresProject = false)
</code></pre>
<h1 id="various-useful-tasks">Various useful tasks<a class="headerlink" href="#various-useful-tasks" title="Permanent link">&para;</a></h1>
<h2 id="displaying-the-classpath">Displaying the classpath<a class="headerlink" href="#displaying-the-classpath" title="Permanent link">&para;</a></h2>
<p>To display the classpath, use the following command:</p>
<pre><code>mvn dependency:build-classpath
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
