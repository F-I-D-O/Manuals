<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Jackson - Manuals</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <link href="../../../extra.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">Manuals</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Programming <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">C++</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../C%2B%2B/C%2B%2B%20Debugging%20and%20Profiling/" class="dropdown-item">C++ Debugging and Profiling</a>
</li>
            
<li>
    <a href="../../C%2B%2B/C%2B%2B%20Manual/" class="dropdown-item">C++ Manual</a>
</li>
            
<li>
    <a href="../../C%2B%2B/C%2B%2B%20Workflow/" class="dropdown-item">C++ Workflow</a>
</li>
            
<li>
    <a href="../../C%2B%2B/CMake%20Manual/" class="dropdown-item">CMake Manual</a>
</li>
            
<li>
    <a href="../../C%2B%2B/Google%20Test/" class="dropdown-item">Google Test</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Java</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../Debugging%20Java/" class="dropdown-item">Debugging Java</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Jackson</a>
</li>
            
<li>
    <a href="../Java%20Manual/" class="dropdown-item">Java Manual</a>
</li>
            
<li>
    <a href="../Java%20Workflow/" class="dropdown-item">Java Workflow</a>
</li>
            
<li>
    <a href="../Maven/" class="dropdown-item">Maven</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Python</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Python/Matplotlib%20Manual/" class="dropdown-item">Matplotlib Manual</a>
</li>
            
<li>
    <a href="../../Python/Pandas%20Manual/" class="dropdown-item">Pandas Manual</a>
</li>
            
<li>
    <a href="../../Python/Plotly%20Manual/" class="dropdown-item">Plotly Manual</a>
</li>
            
<li>
    <a href="../../Python/Python%20Debugging/" class="dropdown-item">Python Debugging</a>
</li>
            
<li>
    <a href="../../Python/Python%20Manual/" class="dropdown-item">Python Manual</a>
</li>
            
<li>
    <a href="../../Python/Python%20Workflow/" class="dropdown-item">Python Workflow</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Web</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Web/CSS%20Manual/" class="dropdown-item">CSS Manual</a>
</li>
            
<li>
    <a href="../../Web/css/" class="dropdown-item">css</a>
</li>
            
<li>
    <a href="../../Web/Google%20API%20and%20Apps%20Script/" class="dropdown-item">Google API and Apps Script</a>
</li>
            
<li>
    <a href="../../Web/htaccess/" class="dropdown-item">htaccess</a>
</li>
            
<li>
    <a href="../../Web/JavaScript/" class="dropdown-item">JavaScript</a>
</li>
            
<li>
    <a href="../../Web/Jekyll/" class="dropdown-item">Jekyll</a>
</li>
            
<li>
    <a href="../../Web/mkdocs/" class="dropdown-item">mkdocs</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../../Common/" class="dropdown-item">Common</a>
</li>
                                    
<li>
    <a href="../../Git/" class="dropdown-item">Git</a>
</li>
                                    
<li>
    <a href="../../Gurobi/" class="dropdown-item">Gurobi</a>
</li>
                                    
<li>
    <a href="../../HDF/" class="dropdown-item">HDF</a>
</li>
                                    
<li>
    <a href="../../JSON/" class="dropdown-item">JSON</a>
</li>
                                    
<li>
    <a href="../../Native%20Libraries/" class="dropdown-item">Native Libraries</a>
</li>
                                    
<li>
    <a href="../../PostgreSQL%20Manual/" class="dropdown-item">PostgreSQL Manual</a>
</li>
                                    
<li>
    <a href="../../Regex/" class="dropdown-item">Regex</a>
</li>
                                    
<li>
    <a href="../../Ruby%20Workflow/" class="dropdown-item">Ruby Workflow</a>
</li>
                                    
<li>
    <a href="../../SQL%20Manual/" class="dropdown-item">SQL Manual</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">LaTeX <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../LaTeX/Latex%20manual/" class="dropdown-item">Latex manual</a>
</li>
                                    
<li>
    <a href="../../../LaTeX/LaTeX%20workflow/" class="dropdown-item">LaTeX workflow</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../../Ubuntu" class="nav-link">Ubuntu</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Windows <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../Windows/Excel%20Manual/" class="dropdown-item">Excel Manual</a>
</li>
                                    
<li>
    <a href="../../../Windows/PowerPoint/" class="dropdown-item">PowerPoint</a>
</li>
                                    
<li>
    <a href="../../../Windows/Powershell%20Manual/" class="dropdown-item">Powershell Manual</a>
</li>
                                    
<li>
    <a href="../../../Windows/VSCode/" class="dropdown-item">VSCode</a>
</li>
                                    
<li>
    <a href="../../../Windows/Windows%20Manual/" class="dropdown-item">Windows Manual</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Audio & Video <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../Audio%20%26%20Video/FFMpeg/" class="dropdown-item">FFMpeg</a>
</li>
                                    
<li>
    <a href="../../../Audio%20%26%20Video/VLC/" class="dropdown-item">VLC</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Cloud computing <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../Cloud%20computing/Lmod/" class="dropdown-item">Lmod</a>
</li>
                                    
<li>
    <a href="../../../Cloud%20computing/RCI%20cluster/" class="dropdown-item">RCI cluster</a>
</li>
                                    
<li>
    <a href="../../../Cloud%20computing/Slurm/" class="dropdown-item">Slurm</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">GIS <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../GIS/GIS%20formats/" class="dropdown-item">GIS formats</a>
</li>
                                    
<li>
    <a href="../../../GIS/Overpass%20Manual/" class="dropdown-item">Overpass Manual</a>
</li>
                                    
<li>
    <a href="../../../GIS/QGIS/" class="dropdown-item">QGIS</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Images <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../Images/Midjourney/" class="dropdown-item">Midjourney</a>
</li>
                                    
<li>
    <a href="../../../Images/Photopea/" class="dropdown-item">Photopea</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Linux <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../Linux/Linux%20Manual/" class="dropdown-item">Linux Manual</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../../Arxiv/" class="nav-link">Arxiv</a>
                            </li>
                            <li class="navitem">
                                <a href="../../.." class="nav-link">index</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../Markdown/" class="nav-link">Markdown</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../Network/" class="nav-link">Network</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../Security/" class="nav-link">Security</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../vscode/" class="nav-link">vscode</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../Web%20Tricks/" class="nav-link">Web Tricks</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../YAML/" class="nav-link">YAML</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../Debugging%20Java/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../Java%20Manual/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#object-mapper-with-data-binding" class="nav-link">Object mapper with data binding</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#ignore-specific-fields" class="nav-link">Ignore specific fields</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#include-only-specific-fields" class="nav-link">Include only specific fields</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#represent-a-class-by-a-single-member" class="nav-link">Represent a class by a single member</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#deserialization" class="nav-link">Deserialization</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#multiple-setters" class="nav-link">Multiple Setters</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#update-existing-instance" class="nav-link">Update existing instance</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="4"><a href="#updating-polymorphic-types" class="nav-link">Updating polymorphic types</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#read-just-part-of-the-file" class="nav-link">Read just part of the file</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#check-that-some-node-is-present" class="nav-link">Check that some node is present</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#interface-or-abstract-class" class="nav-link">Interface or abstract class</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="4"><a href="#custom-deserializer" class="nav-link">Custom deserializer</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#custom-deserializer_1" class="nav-link">Custom deserializer</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="4"><a href="#creating-a-custom-deserializer-for-class" class="nav-link">Creating a custom deserializer for class</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="4"><a href="#registering-the-deserializer" class="nav-link">Registering the deserializer</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="4"><a href="#custom-deserializer-with-generic-types" class="nav-link">Custom deserializer with generic types</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="4"><a href="#custom-deserializer-with-inheritance" class="nav-link">Custom deserializer with inheritance</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#serialization" class="nav-link">Serialization</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#appending-to-an-existing-file" class="nav-link">Appending to an existing file</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#complex-member-filters" class="nav-link">Complex member filters</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#flatting-the-hierarchy" class="nav-link">Flatting the hierarchy</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#custom-serializer" class="nav-link">Custom serializer</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#annotations" class="nav-link">Annotations</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#multiple-objects" class="nav-link">Multiple objects</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#default-serializers-and-deserializers" class="nav-link">Default Serializers and Deserializers</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#java-8-date-and-time-deserialization" class="nav-link">Java 8 Date and Time (de)serialization</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#object-mapper-with-tree-model" class="nav-link">Object mapper with tree model</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#iterating-over-json-array" class="nav-link">Iterating over JSON array</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#iterating-over-json-object" class="nav-link">Iterating over JSON object</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#csv-with-jackson" class="nav-link">CSV with Jackson</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#use-the-header" class="nav-link">Use the header</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p><a href="https://github.com/FasterXML/jackson-docs">Documentation</a></p>
<p>Jackson is a (de)serialization library primarily focused to the JSON format. It supports annotations for automatic serialization and deserialization of Java objects.</p>
<p>Jackson have two basic modes:</p>
<ul>
<li><strong>Object mapper mode</strong>, JSON is (de)serialized from/to Java objects</li>
<li><strong>Parser/Generator mode</strong>, JSON is parsed/generated one token at a time</li>
</ul>
<p>To make it even more complicated, the Object mapper mode can be used in two ways:</p>
<ul>
<li><strong>Data binding</strong>, where the JSON is (de)serialized from/to Java objects that we provide for this purpose</li>
<li><strong>Tree model</strong>, where the JSON is (de)serialized from/to a tree structure of Jackson objects</li>
</ul>
<p>Tutorials:</p>
<ul>
<li><a href="https://github.com/FasterXML/jackson-databind/">Official databind tutorial</a></li>
<li><a href="https://jenkov.com/tutorials/java-json/index.html">Jenkov tutorial</a> (old but gold)</li>
</ul>
<h1 id="object-mapper-with-data-binding">Object mapper with data binding<a class="headerlink" href="#object-mapper-with-data-binding" title="Permanent link">&para;</a></h1>
<p>The basic usage is:</p>
<pre><code class="language-Java">public class MyClass{
    public String par1;
    public int par2;
    ...
}

ObjectMapper mapper = new ObjectMapper();

// Deserialization
MyClass myClass = mapper.readValue(new File(&quot;path/to/file.json&quot;), MyClass.class);

// Serialization
MyClass myObject = new MyClass();
...
mapper.writeValue(new File(&quot;path/to/file.json&quot;), myObject);
</code></pre>
<p>By defualt, Jackson:</p>
<ul>
<li>(de)serialize from/to public fields or public setters/getters with the same name as the JSON property</li>
<li>all JSON properties are deserialized and all public fields or public getters are serialized</li>
<li>if there is no matching field or setter to a JSON property, the deserialization fails</li>
</ul>
<p>However, we can customize the (de)serialization process using many annotations. This way, we can ignore some fields or JSON properties, use constructors or factory methods for deserialization, (de)serialize from/to arrays and objects, and many other things.</p>
<h2 id="ignore-specific-fields">Ignore specific fields<a class="headerlink" href="#ignore-specific-fields" title="Permanent link">&para;</a></h2>
<p>If you want to ignore specific fields during serialization or deserialization, you can use the <a href="https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonIgnoreProperties.html"><code>@JsonIgnoreProperties</code> annotation</a>. Use it as a class or type annotation. Example:</p>
<pre><code class="language-Java">@JsonIgnoreProperties({ &quot;par1&quot;, &quot;par2&quot; })
public class ConfigModel {
    // &quot;par1&quot; and &quot;par2&quot; will be ignored 
}
</code></pre>
<p>This annotation can also prevent the "Unrecognized field" error during deserialization, as the ignored fields does not have to be present as Java class members.</p>
<p>we can achieve the same by field annotations, specifically the <a href="https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonIgnore.html"><code>@JsonIgnore</code></a> annotation. Example:</p>
<pre><code class="language-Java">public class ConfigModel {
    @JsonIgnore
    public String par1;
    @JsonIgnore
    public int par2;
}
</code></pre>
<h2 id="include-only-specific-fields">Include only specific fields<a class="headerlink" href="#include-only-specific-fields" title="Permanent link">&para;</a></h2>
<p>If the fields to be (de)serialized are only a minority of all fields, we can use a reverse approach: the <code>@JsonIncludeProperties</code> annotation. For example:</p>
<pre><code class="language-Java">@JsonIncludeProperties({ &quot;par1&quot;, &quot;par2&quot; })
public class ConfigModel {
    // only &quot;par1&quot; and &quot;par2&quot; will be (de)serialized
}
</code></pre>
<p>Note that unlike for ignoring, there is no field annotation for including only specific fields. The <code>@JsonInclude</code> annotation serves a different purpose.</p>
<h2 id="represent-a-class-by-a-single-member">Represent a class by a single member<a class="headerlink" href="#represent-a-class-by-a-single-member" title="Permanent link">&para;</a></h2>
<p>If we want the java class to be represented by a single value in the <strong>serialized</strong> file, we can achieve that by adding the <a href="https://fasterxml.github.io/jackson-annotations/javadoc/2.8/com/fasterxml/jackson/annotation/JsonValue.html"><code>@JsonValue</code></a> annotation above the member or method that should represent the class. Note, however, that this only works for simple values, because the member serializers are not called, the members is serialized as a simple value instead. <strong>If you want to represent a class by a single but complex member, use a custom serializer instead</strong>. </p>
<p>An equivalent annotation for <strong>deserialization</strong> is the <code>@JsonCreator</code> annotation which should be placed above a constructor or factory method.</p>
<h2 id="deserialization">Deserialization<a class="headerlink" href="#deserialization" title="Permanent link">&para;</a></h2>
<p>The standard usage is:</p>
<pre><code class="language-Java">ObjectMapper mapper = new ObjectMapper();
// ... configure mapper

File file = new File(&lt;PATH TO FILE&gt;);

Instance instance = mapper.readValue(file, Instance.class);
</code></pre>
<p>By default, new objects are created for all members in the object hierarchy that are either present in the serialized file.</p>
<p>New objects are created using the setter, if exists, otherwise, the costructor is called.</p>
<h3 id="multiple-setters">Multiple Setters<a class="headerlink" href="#multiple-setters" title="Permanent link">&para;</a></h3>
<p>If there are multiple setters, we need to specify the one that should be used for deserialization by marking it with the <code>@JsonSetter</code> annotation.</p>
<h3 id="update-existing-instance">Update existing instance<a class="headerlink" href="#update-existing-instance" title="Permanent link">&para;</a></h3>
<p>You can update an existing instance using the <a href="https://fasterxml.github.io/jackson-databind/javadoc/2.9/com/fasterxml/jackson/databind/ObjectMapper.html#readerForUpdating-java.lang.Object-"><code>readerForUpdating</code></a> method:</p>
<pre><code class="language-Java">ObjectReader or = mapper.readerForUpdating(instance); // special reader
or.readValue(file) // we can use the method we already know on the object reader
</code></pre>
<p>Note that <strong>by default, the update is shalow</strong>. Only the <code>instance</code> object itself is updated, but its members are brand new objects. If you want to keep all objects from an existing object hierarchy, you need to use the <code>@JsonMerge</code> annotation.
You should put this annotation above any member of the root object you want to update instead of replacing it. <strong>The <code>@JsonUpgrade</code> annotation is recursive</strong>: the members of the member annotated with <code>@JsonUpgrade</code> are updated as well and so on.</p>
<h4 id="updating-polymorphic-types">Updating polymorphic types<a class="headerlink" href="#updating-polymorphic-types" title="Permanent link">&para;</a></h4>
<p>For updating polymorpic type, the rule is that the exact type has to match. Also, you need jackson-databind version 2.14.0 or greater.</p>
<h3 id="read-just-part-of-the-file">Read just part of the file<a class="headerlink" href="#read-just-part-of-the-file" title="Permanent link">&para;</a></h3>
<p>For reading just part of the file, use the <code>at</code> selector taht is available in the <code>ObjectReader</code> class. We need to first obtain the reader from a mapper, and then use the selector:</p>
<pre><code class="language-Java">ObjectReader reader = mapper.readerFor(Instance.class);
Instance instance = reader.at(&quot;data&quot;).readValue(file)
</code></pre>
<p>Note that if the path parameter of the <code>at</code> method is incorrect, the method throws an exception with the message: "no content to map due to end-of-input".</p>
<h3 id="check-that-some-node-is-present">Check that some node is present<a class="headerlink" href="#check-that-some-node-is-present" title="Permanent link">&para;</a></h3>
<p>To check for presence of a node, we should use the <code>JsonPointer</code> class:</p>
<pre><code class="language-Java">JsonPointer jsonPointer = Json.createPointer(&quot;&lt;JSON PATH&gt;&quot;);
boolean found = jsonPointer.containsValue(jsonStructure);
</code></pre>
<p>We can also use the <code>JsonPointer</code> in the <code>at</code> method:</p>
<pre><code class="language-Java">JsonPointer jsonPointer = Json.createPointer(&quot;&lt;JSON PATH&gt;&quot;);
boolean found = jsonPointer.containsValue(jsonStructure);

if(found){
    Instance instance = reader.at(jsonPointer).readValue(file, Instance.class)
}
</code></pre>
<h3 id="interface-or-abstract-class">Interface or abstract class<a class="headerlink" href="#interface-or-abstract-class" title="Permanent link">&para;</a></h3>
<p>When serializing interface or abstract class, it is important to include the implementation type into serialization. Otherwise, the deserialization fails, because it cannot determine the concreate type. To serialize the concrete type, we can use the <a href="https://fasterxml.github.io/jackson-annotations/javadoc/2.4/com/fasterxml/jackson/annotation/JsonTypeInfo.html"><code>@JsonRypeInfo</code></a> and <code>JsonSubTypes</code> annotations:</p>
<pre><code class="language-Java">@JsonTypeInfo(
    use = JsonTypeInfo.Id.CLASS, // what value should we store, here the class name
    include = JsonTypeInfo.As.PROPERTY, // serialize as a property of the JSON object
    property = &quot;type&quot; // property name
)
public interface Interface  {
    ...
}

</code></pre>
<p>Te above code will work, the full class name will be serialized in the file, however. If we want to use a shorter syntax, i.e., some codename for the class, we need to specify a mapping between this codename and the conreate class:</p>
<pre><code class="language-Java">@JsonTypeInfo(
    use = JsonTypeInfo.Id.NAME, // what value should we store, here a custom name
    include = JsonTypeInfo.As.PROPERTY, // serialize as a property of the JSON object
    property = &quot;type&quot; // property name
)
@JsonSubTypes({
    @JsonSubTypes.Type(value = Implementation.class, name = &quot;Implementation name&quot;)
})
public interface Interface  {
    ...
}
</code></pre>
<h4 id="custom-deserializer">Custom deserializer<a class="headerlink" href="#custom-deserializer" title="Permanent link">&para;</a></h4>
<p>An alternative to <code>@JsonTypeInfo</code> is to use a custom deserializer: 
https://stackoverflow.com/questions/44122782/jackson-deserialize-based-on-type</p>
<h3 id="custom-deserializer_1">Custom deserializer<a class="headerlink" href="#custom-deserializer_1" title="Permanent link">&para;</a></h3>
<p>If our architecture is so complex or specific that none of the Jackson annotations can help us to achieve the desired behavior, we can use a custom deserializer. For that we need to:</p>
<ol>
<li>Implement a custom deserializer by extending the <code>JsonDeserializer</code> class</li>
<li>Registering the deserializer in the <code>ObjectMapper</code></li>
</ol>
<h4 id="creating-a-custom-deserializer-for-class">Creating a custom deserializer for class<a class="headerlink" href="#creating-a-custom-deserializer-for-class" title="Permanent link">&para;</a></h4>
<p>The only method we need to implement is the:</p>
<pre><code class="language-Java">T deserialize(JsonParser jsonParser, DeserializationContext deserializationContext)
</code></pre>
<p>where T is the type of the object we are deserializing. </p>
<p>To get the Jaksons representation of the JSON tree, we can call:</p>
<pre><code class="language-Java">JsonNode node = jsonParser.getCodec().readTree(jsonParser);
</code></pre>
<p>We can get all the fields by calling using the <code>node.fields()</code> method. For arrays, there is a method <code>node.elements()</code>;</p>
<h4 id="registering-the-deserializer">Registering the deserializer<a class="headerlink" href="#registering-the-deserializer" title="Permanent link">&para;</a></h4>
<pre><code class="language-Java">ObjectMapper mapper = new ObjectMapper();
SimpleModule module = new SimpleModule();
module.addDeserializer(OurClass.class, new OurClassDeserializer());
mapper.registerModule(module);
</code></pre>
<h4 id="custom-deserializer-with-generic-types">Custom deserializer with generic types<a class="headerlink" href="#custom-deserializer-with-generic-types" title="Permanent link">&para;</a></h4>
<p>When we need a custom deserializer for a generic class, we need to use a wildcard to cover multiple values of generic argument:</p>
<pre><code class="language-Java">public class OurDeserializer extends JsonDeserializer&lt;OurGenericClass&lt;?&gt;&gt;{
    ...
}
</code></pre>
<p>If we also need to get the generic argument type from JSON, we need to implement the <code>ContextualDeserializer</code> interface. This is discribed in a <a href="https://stackoverflow.com/questions/36159677/how-to-create-a-custom-deserializer-in-jackson-for-a-generic-type">SO answer</a>.</p>
<h4 id="custom-deserializer-with-inheritance">Custom deserializer with inheritance<a class="headerlink" href="#custom-deserializer-with-inheritance" title="Permanent link">&para;</a></h4>
<p>We can have a common deserializer for both parent and child class, or multiple child classes. However, it is necessary to </p>
<ul>
<li>make the deserializer generic and</li>
<li>register the deserializer for all classes, not just for the parent.</li>
</ul>
<p>Example:</p>
<pre><code class="language-java">public class PolymorphicDeserializer&lt;T extends Parent&gt; extends JsonDeserializer&lt;T&gt;

    @Override
    public T deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JsonProcessingException {
        ...
    }
}

module.addDeserializer(ChildA.class, new PolymorphicDeserializer&lt;&gt;());
module.addDeserializer(ChildB.class, new ProcedureParameterDeserializer&lt;&gt;());

</code></pre>
<h2 id="serialization">Serialization<a class="headerlink" href="#serialization" title="Permanent link">&para;</a></h2>
<p>Standard serialization:</p>
<pre><code class="language-Java">// compressed
mapper.writer().writeValue(file, object);

//  or with indents, etc.
mapper.writerWithDefaultPrettyPrinter().writeValue(file, object); 
</code></pre>
<p>By default, new objects are created for all members in the object hierarchy that are either:</p>
<ul>
<li>public value mebers (fields)</li>
<li>public getters: public methods with name <code>get&lt;NAME&gt;</code>, where <code>&lt;NAME&gt;</code> is a name of some value member</li>
</ul>
<p>Other getters with different name are called only if there is an annotation above them. A special annotation dedicated for this is <code>@JsonProperty</code>.</p>
<h3 id="appending-to-an-existing-file">Appending to an existing file<a class="headerlink" href="#appending-to-an-existing-file" title="Permanent link">&para;</a></h3>
<p>To append to an existing file, we need to create an output stream in the append mode and then use it in jackson:</p>
<pre><code class="language-Java">ObjectMapper mapper = ...
JsonGenerator generator = mapper.getFactory().createGenerator(new FileOutputStream(new File(&lt;FILENAME&gt;), true));
mapper.writeValue(generator, output);
</code></pre>
<h3 id="complex-member-filters">Complex member filters<a class="headerlink" href="#complex-member-filters" title="Permanent link">&para;</a></h3>
<p>Insted of adding annotations to each member we want to ignore, we can also apply some more compex filters, to do that, we need to:</p>
<ol>
<li>add a <code>@JsonFilter("&lt;FILTER NAME&gt;")</code> annotation to all classes for which we want to use the filter</li>
<li>create the filter</li>
<li>pass a set of all filters we want to use to the writer we are using for serialization</li>
</ol>
<p>The example below keeps only members inherited from <code>MyClass</code>:</p>
<pre><code class="language-Java">// object on which we apply the filter
@JsonFilter(&quot;myFilter&quot;)
class targetClass{
    ...
}

// filter
PropertyFilter filter = new SimpleBeanPropertyFilter() {
    @Override
    public void serializeAsField(
        Object pojo, JsonGenerator jgen, SerializerProvider provider, PropertyWriter writer
    ) throws Exception {
        if(writer.getType().isTypeOrSubTypeOf(MyClass.class)){
            writer.serializeAsField(pojo, jgen, provider);
        }
    }

};

FilterProvider filters = new SimpleFilterProvider().addFilter(&quot;myFilter&quot;, filter);

// use a writer created with filters
mapper.writer(filters).writeValue(generator, output);
...
</code></pre>
<h3 id="flatting-the-hierarchy">Flatting the hierarchy<a class="headerlink" href="#flatting-the-hierarchy" title="Permanent link">&para;</a></h3>
<p>When we desire to simplify the object hierarchy, we can use the <a href="https://fasterxml.github.io/jackson-annotations/javadoc/2.4/com/fasterxml/jackson/annotation/JsonUnwrapped.html"><code>@JsonUnwrapped</code></a> annotation above a member of a class. With this annotation, the annotated member object will be skipped while all its members will be serialized into its parent.</p>
<h3 id="custom-serializer">Custom serializer<a class="headerlink" href="#custom-serializer" title="Permanent link">&para;</a></h3>
<p>If the serialization requirements are too complex to be expressed using Jackson annotations, we can use a custom serialzier:</p>
<pre><code class="language-Java">public class MyCustomSerializer extends JsonSerializer&lt;MyClass&gt; {
    @Override
    public void serialize(MyClass myClass, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {
        ...
    }
}
</code></pre>
<p>Analogously to custom deserializer, we can register custom serializer either in the object mapper:</p>
<pre><code class="language-Java">SimpleModule module = new SimpleModule();
module.addSerializer(MyClass.class, new MyCustomSerializer());
mapper.registerModule(module);
</code></pre>
<p>or by annotating the class:</p>
<pre><code class="language-Java">@JsonSerialize(using = MyCustomSerializer.class)
public class MyClass{
    ...
}
</code></pre>
<p>You can call standard serializers from custom serializers using the <code>SerializerProvider</code> and <code>JsonGenerator</code> instances supplied as a parameters of the <code>serialize</code> method. For example the standard serialized value of som inner/member object class can be obtained using:</p>
<pre><code class="language-Java">serializerProvider.defaultSerializeValue(myInnerInstance, jsonGenerator);
</code></pre>
<h2 id="annotations">Annotations<a class="headerlink" href="#annotations" title="Permanent link">&para;</a></h2>
<h3 id="multiple-objects">Multiple objects<a class="headerlink" href="#multiple-objects" title="Permanent link">&para;</a></h3>
<p>If there are multiple objects involved in the (de)serializetion, we can use the <code>@JsonCreator</code> and <code>@JsonProperty</code> annotations to split the work:</p>
<pre><code class="language-Java">@JsonCreator
public ConfigModel(
    @JsonProperty(&quot;first&quot;) ClassA instanceA,
    @JsonProperty(&quot;second&quot;) ClassB instanceB
) {
    ...
}
</code></pre>
<p>in the above examples, the <code>first</code> and <code>second</code> are keys mapping the objects in the serialized file from which <code>instanceA</code> and <code>instanceB</code> should be created.</p>
<h2 id="default-serializers-and-deserializers">Default Serializers and Deserializers<a class="headerlink" href="#default-serializers-and-deserializers" title="Permanent link">&para;</a></h2>
<p>By default, Jackson can serialize and deserialize many types of objects: </p>
<ul>
<li>all primitive types</li>
<li>all primitive wrappers</li>
<li><code>String</code></li>
<li><code>BigInteger</code></li>
<li><code>BigDecimal</code></li>
<li>and many others</li>
</ul>
<h3 id="java-8-date-and-time-deserialization">Java 8 Date and Time (de)serialization<a class="headerlink" href="#java-8-date-and-time-deserialization" title="Permanent link">&para;</a></h3>
<p>Among the types that are not covered in basic Jakson package are the Java 8 types for date and time. To (de)serialize them, we have two options:</p>
<ul>
<li>use the <a href="https://github.com/FasterXML/jackson-modules-java8"><code>jackson-datatype-jsr310</code></a> module that adds support for the ISO-8601 format for date and time</li>
<li>use custom serializers and deserializers if we need a different format</li>
</ul>
<p>To use the <code>jackson-datatype-jsr310</code> module, we need to add it to the dependencies:</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;
    &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;
    &lt;version&gt;2.12.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>and then register the module in the object mapper:</p>
<pre><code class="language-Java">ObjectMapper mapper = new ObjectMapper();
mapper.registerModule(new JavaTimeModule());
</code></pre>
<h1 id="object-mapper-with-tree-model">Object mapper with tree model<a class="headerlink" href="#object-mapper-with-tree-model" title="Permanent link">&para;</a></h1>
<p><a href="https://jenkov.com/tutorials/java-json/jackson-jsonnode.html">Jenkov tutorial on JsonNode</a></p>
<p>To get the tree model, we can use the <code>readTree</code> method of the <code>ObjectMapper</code> class:</p>
<pre><code class="language-Java">ObjectMapper mapper = new ObjectMapper();
JsonNode node = mapper.readTree(new File(&quot;path/to/file.json&quot;));
</code></pre>
<h2 id="iterating-over-json-array">Iterating over JSON array<a class="headerlink" href="#iterating-over-json-array" title="Permanent link">&para;</a></h2>
<p>First we need to convert the node representing the array to the <code>ArrayNode</code> class. Then we can iterate over the array using for each or the <code>get</code> method:</p>
<pre><code class="language-Java">ArrayNode array = (ArrayNode) node.get(&quot;array&quot;);
for(JsonNode element: array){
    ...
}

// or
for(int i = 0; i &lt; array.size(); i++){
    JsonNode element = array.get(i);
    ...
}
</code></pre>
<h2 id="iterating-over-json-object">Iterating over JSON object<a class="headerlink" href="#iterating-over-json-object" title="Permanent link">&para;</a></h2>
<p>First we need to convert the node representing the object to the <code>ObjectNode</code> class. Then we can iterate over the object using the <code>fieldNames</code> method:</p>
<pre><code class="language-Java">ObjectNode object = (ObjectNode) node.get(&quot;object&quot;);
for(String fieldName: object.fieldNames()){
    JsonNode value = object.get(fieldName);
    ...
}
</code></pre>
<h1 id="csv-with-jackson">CSV with Jackson<a class="headerlink" href="#csv-with-jackson" title="Permanent link">&para;</a></h1>
<p><a href="https://github.com/FasterXML/jackson-dataformats-text/tree/2.17/csv">documentation</a></p>
<p>To read a CSV file with Jackson, we need to use the <code>CsvMapper</code> class. The basic usage is:</p>
<pre><code class="language-Java">CsvMapper mapper = new CsvMapper(); 

// iterator construction
MappingIterator&lt;&lt;row type&gt;&gt; it = mapper....readValues(new File(&quot;path/to/file.csv&quot;);

// iterator usage
while(it.hasNext()){
    &lt;row type&gt; row = it.next();
    ...
}
</code></pre>
<p>Here the <code>&lt;row type</code> is the target type that should represent a single row. Depending on it, there will be different code in place of <code>mapper...</code>. For example, to get a list of strings for each row, we can use:</p>
<pre><code class="language-Java">MappingIterator&lt;List&lt;String&gt;&gt; it = mapper.readerForListOf(String.class)...
</code></pre>
<h2 id="use-the-header">Use the header<a class="headerlink" href="#use-the-header" title="Permanent link">&para;</a></h2>
<p>If the CSV file has a header, we can use it to load each row into a map of key-value pairs:</p>
<pre><code class="language-Java">CsvSchema schema = CsvSchema.emptySchema().withHeader();
MappingIterator&lt;Map&lt;String, String&gt;&gt; it = mapper.readerForMapOf(String.class).with(schema).readValues(new File(&quot;path/to/file.csv&quot;));
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../../js/jquery-3.6.0.min.js"></script>
        <script src="../../../js/bootstrap.min.js"></script>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js"></script>
        <script src="../../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
