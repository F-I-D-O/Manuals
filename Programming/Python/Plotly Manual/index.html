<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Plotly Manual - Manuals</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
        <link href="../../../extra.css" rel="stylesheet">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">Manuals</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Programming <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">C++</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../C%2B%2B/C%2B%2B%20Debugging%20and%20Profiling/" class="dropdown-item">C++ Debugging and Profiling</a>
</li>
            
<li>
    <a href="../../C%2B%2B/C%2B%2B%20Manual/" class="dropdown-item">C++ Manual</a>
</li>
            
<li>
    <a href="../../C%2B%2B/C%2B%2B%20Workflow/" class="dropdown-item">C++ Workflow</a>
</li>
            
<li>
    <a href="../../C%2B%2B/CMake%20Manual/" class="dropdown-item">CMake Manual</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Java</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Java/Debugging%20Java/" class="dropdown-item">Debugging Java</a>
</li>
            
<li>
    <a href="../../Java/Java%20Programming%20Guide/" class="dropdown-item">Java Programming Guide</a>
</li>
            
<li>
    <a href="../../Java/Java%20Workflow/" class="dropdown-item">Java Workflow</a>
</li>
            
<li>
    <a href="../../Java/Maven/" class="dropdown-item">Maven</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">mosek</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../.." class="dropdown-item">xml</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Python</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../Matplotlib%20Manual/" class="dropdown-item">Matplotlib Manual</a>
</li>
            
<li>
    <a href="../Pandas%20Manual/" class="dropdown-item">Pandas Manual</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Plotly Manual</a>
</li>
            
<li>
    <a href="../Python%20Debugging/" class="dropdown-item">Python Debugging</a>
</li>
            
<li>
    <a href="../Python%20Manual/" class="dropdown-item">Python Manual</a>
</li>
            
<li>
    <a href="../Python%20Workflow/" class="dropdown-item">Python Workflow</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Web</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Web/CSS%20Manual/" class="dropdown-item">CSS Manual</a>
</li>
            
<li>
    <a href="../../Web/htaccess/" class="dropdown-item">htaccess</a>
</li>
            
<li>
    <a href="../../Web/JavaScript/" class="dropdown-item">JavaScript</a>
</li>
            
<li>
    <a href="../../Web/Jekyll/" class="dropdown-item">Jekyll</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../../Common/" class="dropdown-item">Common</a>
</li>
                                    
<li>
    <a href="../../Google%20API%20and%20Apps%20Script/" class="dropdown-item">Google API and Apps Script</a>
</li>
                                    
<li>
    <a href="../../Gurobi/" class="dropdown-item">Gurobi</a>
</li>
                                    
<li>
    <a href="../../JSON/" class="dropdown-item">JSON</a>
</li>
                                    
<li>
    <a href="../../Overpass%20Manual/" class="dropdown-item">Overpass Manual</a>
</li>
                                    
<li>
    <a href="../../PostgreSQL%20Manual/" class="dropdown-item">PostgreSQL Manual</a>
</li>
                                    
<li>
    <a href="../../RCI%20cluster/" class="dropdown-item">RCI cluster</a>
</li>
                                    
<li>
    <a href="../../Regex/" class="dropdown-item">Regex</a>
</li>
                                    
<li>
    <a href="../../Ruby%20Workflow/" class="dropdown-item">Ruby Workflow</a>
</li>
                                    
<li>
    <a href="../../Slurm/" class="dropdown-item">Slurm</a>
</li>
                                    
<li>
    <a href="../../SQL%20Manual/" class="dropdown-item">SQL Manual</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">LaTeX <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../.." class="dropdown-item">package manuals</a>
</li>
                                    
<li>
    <a href="../../../LaTeX/Latex%20manual/" class="dropdown-item">Latex manual</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Ubuntu <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../Ubuntu/Linux%20Manual/" class="dropdown-item">Linux Manual</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Windows <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../Windows/Powershell%20Manual/" class="dropdown-item">Powershell Manual</a>
</li>
                                    
<li>
    <a href="../../../Windows/Windows%20Manual/" class="dropdown-item">Windows Manual</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../../FFMpeg/" class="nav-link">FFMpeg</a>
                            </li>
                            <li class="navitem">
                                <a href="../../.." class="nav-link">index</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../QGIS/" class="nav-link">QGIS</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../Pandas%20Manual/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../Python%20Debugging/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#plotly-express" class="nav-link">Plotly Express</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#common-parameters-for-all-types-of-plots" class="nav-link">Common Parameters For All Types of Plots</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#histogram" class="nav-link">Histogram</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#bar-chart" class="nav-link">Bar Chart</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#automatic-subplots-facet-plots" class="nav-link">Automatic Subplots: Facet plots</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#independent-axes-between-rows-and-columns" class="nav-link">Independent axes between rows and columns</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#removing-the-column-name-from-the-rowcolumn-annotations" class="nav-link">Removing the column name from the row/column annotations</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#sharing-the-axes-titles-between-rows-and-columns" class="nav-link">Sharing the axes titles between rows and columns</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#plotly-graph-objects" class="nav-link">Plotly Graph Objects</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#bar-chart_1" class="nav-link">Bar Chart</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#line-chart" class="nav-link">Line Chart</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#create-subplots" class="nav-link">Create subplots</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#customizing-the-figure" class="nav-link">Customizing the Figure</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#size-and-margins" class="nav-link">Size and margins</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#customize-axes" class="nav-link">Customize axes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#legend" class="nav-link">Legend</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#hide-legend" class="nav-link">Hide legend</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#adding-figure-annotations" class="nav-link">Adding Figure Annotations</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#annotations-in-facet-plots" class="nav-link">Annotations in facet plots</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#text" class="nav-link">Text</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#subscript-and-superscript" class="nav-link">Subscript and superscript</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#exporting-the-figure" class="nav-link">Exporting the Figure</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#export-hangs-out" class="nav-link">Export hangs out</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p>In plotly, we have two options:
- plot quickly with plotly express
- full control using graph objects</p>
<p>Note that thes options can hardly be mixed. For example, we cannot use plotly express to create a figure and then add a subplot to it. Similarly, we cannot use the <code>make_subplots</code> function to create a figure and then add a plotly express plot to it.</p>
<p>In general, it is easier to use plotly express, so we should use it if we are not affected by its limitations. <strong>The plotly express cannot</strong>
- create <strong>custom subplots</strong>. Howwever, automatic "facet" subplots (same plot divided between multiple plots using some data attribute) are possible.</p>
<h1 id="plotly-express">Plotly Express<a class="headerlink" href="#plotly-express" title="Permanent link">&para;</a></h1>
<h2 id="common-parameters-for-all-types-of-plots">Common Parameters For All Types of Plots<a class="headerlink" href="#common-parameters-for-all-types-of-plots" title="Permanent link">&para;</a></h2>
<ul>
<li><code>data_frame</code>: the dataframe to use. Mandatory, first positional parameter.</li>
<li><code>x</code>: the name of the column to use as x axis. Mandatory, second positional parameter.</li>
<li><code>color</code>: the name of the column to use as color.</li>
<li><code>facet_col</code>: the name of the column to use as facet column.</li>
<li><code>facet_row</code>: the name of the column to use as facet row.</li>
<li><code>color_discrete_sequence</code>: the list of colors in hexadecimal format to use for the color column. If the number of colors is less than the number of categories, the colors are reused. If the number of colors is greater, the colors are truncated.</li>
</ul>
<h2 id="histogram">Histogram<a class="headerlink" href="#histogram" title="Permanent link">&para;</a></h2>
<p><a href="https://plotly.com/python/histograms/">documentation</a></p>
<p>Plotly express has <a href="https://plotly.github.io/plotly.py-docs/generated/plotly.express.histogram.html"><code>histogram</code></a> function for creating histograms. The basic syntax is:</p>
<pre><code class="language-python">px.histogram(&lt;dataframe&gt;, &lt;xcol name&gt;)
</code></pre>
<p>The y is then the number of occurences of each value in the x column. </p>
<p>Important parameters:
- <code>nbins</code>: number of bins. </p>
<p>The plotly histogram is usually only good for simple cases or quick plotting. For more complex figures, it is better to generate the histogram manually (using numpy or pandas) and then plot it using the <code>px.bar</code> function.</p>
<h2 id="bar-chart">Bar Chart<a class="headerlink" href="#bar-chart" title="Permanent link">&para;</a></h2>
<p><a href="https://plotly.github.io/plotly.py-docs/generated/plotly.express.bar.html">documentation</a></p>
<p>For bar charts, we use the <code>px.bar</code> function. The basic syntax is:</p>
<pre><code class="language-python">px.bar(&lt;dataframe&gt;, &lt;xcol name&gt;, &lt;y col name&gt;)
</code></pre>
<p>Important parameters:
- <code>barmode</code>: how to combine the bars in case of multiple traces. Can be <code>group</code> (default), <code>stack</code> (default in <em>facet plots</em>), <code>relative</code> or <code>overlay</code>.
- <code>bargap</code>: the gap between bars.
- <code>bar_groupgap</code>: the gap between the bars from the same group (only for <code>barmode = group</code>).</p>
<p>Unfortunately, <strong>there is no way how to represent missing values</strong> in the bar chart (they appear as <code>y = 0</code>).
To mark the missing values, we can use annotations. </p>
<h2 id="automatic-subplots-facet-plots">Automatic Subplots: Facet plots<a class="headerlink" href="#automatic-subplots-facet-plots" title="Permanent link">&para;</a></h2>
<p><a href="https://plotly.com/python/facet-plots/">Facet plots</a> can be created using the same plot function as for normal plotly express plots and supplying the <code>facet_col</code> and/or <code>facet_row</code> parameters. Example:</p>
<pre><code class="language-python">fig = px.histogram(df, x=&quot;column&quot;, facet_row=&quot;&lt;col 1&gt;&quot;, facet_col=&quot;&lt;col 2&gt;&quot;)
</code></pre>
<p>Here, the figure will be devided into subplotts. Each row will share the <code>&lt;column 1&gt;</code> values, and each column will share the <code>&lt;column 2&gt;</code> values. The number of rows and columns will be determined automatically as the number of unique values in <code>&lt;column 1&gt;</code> and <code>&lt;column 2&gt;</code>, respectively.</p>
<h3 id="independent-axes-between-rows-and-columns">Independent axes between rows and columns<a class="headerlink" href="#independent-axes-between-rows-and-columns" title="Permanent link">&para;</a></h3>
<p>It can happen that each row or column should have its own x or y axis due to a different scale. We can accomplish this by calling the <code>update_xaxes</code> and <code>update_yaxes</code> functions on the figure. Example:</p>
<pre><code class="language-python">fig.update_xaxes(matches=None)
fig.update_yaxes(matches=None)
</code></pre>
<h3 id="removing-the-column-name-from-the-rowcolumn-annotations">Removing the column name from the row/column annotations<a class="headerlink" href="#removing-the-column-name-from-the-rowcolumn-annotations" title="Permanent link">&para;</a></h3>
<p>For each row and column, a label is added to the subplot. This label has a format of <code>&lt;column name&gt; = &lt;value&gt;</code>. To remove the column name, we can use the <code>for_each_annotation</code> function. Example:</p>
<pre><code class="language-python">fig.for_each_annotation(lambda a: a.update(text=a.text.split(&quot;=&quot;)[-1]))
</code></pre>
<h3 id="sharing-the-axes-titles-between-rows-and-columns">Sharing the axes titles between rows and columns<a class="headerlink" href="#sharing-the-axes-titles-between-rows-and-columns" title="Permanent link">&para;</a></h3>
<p>Unfortunately, the axes titles cannot be easily shared between rows and columns. The only way is to delete the titles and add shared titles manually using the <code>add_annotation</code> function. Example:</p>
<pre><code class="language-python"># shared y axis title
fig.for_each_yaxis(lambda y: y.update(title = ''))
fig.add_annotation(x=-0.05, y=0.5, text=&quot;Vehicle hours&quot;, textangle=-90, xref=&quot;paper&quot;, yref=&quot;paper&quot;, showarrow=False)

# shared x axis title
fig.for_each_xaxis(lambda y: y.update(title = ''))
fig.add_annotation(x=0.5, y=-0.12, text=&quot;Occupancy&quot;,  xref=&quot;paper&quot;, yref=&quot;paper&quot;, showarrow=False)
</code></pre>
<h1 id="plotly-graph-objects">Plotly Graph Objects<a class="headerlink" href="#plotly-graph-objects" title="Permanent link">&para;</a></h1>
<h2 id="bar-chart_1">Bar Chart<a class="headerlink" href="#bar-chart_1" title="Permanent link">&para;</a></h2>
<p>The basic syntax is:</p>
<pre><code class="language-python">go.Bar(x, y, ...)
</code></pre>
<p>Some more complicated examples are in the <a href="https://plotly.com/python/bar-charts/#basic-bar-charts-with-plotlygraphobjects">documentation</a>.</p>
<h2 id="line-chart">Line Chart<a class="headerlink" href="#line-chart" title="Permanent link">&para;</a></h2>
<p>The line chart is created using the <code>go.Scatter</code> function. Example:</p>
<pre><code class="language-python">go.Scatter(x, y, ...)
</code></pre>
<p><a href="https://plotly.com/python/line-charts/#line-plot-with-goscatter">documentation</a></p>
<h2 id="create-subplots">Create subplots<a class="headerlink" href="#create-subplots" title="Permanent link">&para;</a></h2>
<p><a href="https://plotly.com/python/subplots/">documentation and examples</a></p>
<p>To create a figure with multiple subplots, we use the <code>make_subplots</code> function. Example:</p>
<pre><code class="language-python">fig = make_subplots(rows=2, cols=2, start_cell=&quot;bottom-left&quot;)
fig.add_trace(go.Scatter(x=[1, 2, 3], y=[4, 5, 6]),
              row=1, col=1)
...
fig.show()
</code></pre>
<p>Importanta parameters:
- <code>shared_xaxes</code> and <code>shared_yaxes</code>: if <code>True</code>, the subplots will share the same x and y axes. 
- <code>x_title</code> and <code>y_title</code>: the titles of the x and y axes. 
- <code>horizontal_spacing</code> and <code>vertical_spacing</code>: the spacing between the subplots.</p>
<h1 id="customizing-the-figure">Customizing the Figure<a class="headerlink" href="#customizing-the-figure" title="Permanent link">&para;</a></h1>
<p>The figure object can be custommized in many ways.</p>
<h2 id="size-and-margins">Size and margins<a class="headerlink" href="#size-and-margins" title="Permanent link">&para;</a></h2>
<p>The size and margins can be set using the <code>figure.update_layout</code> function. The specific parameters are:
- <code>width</code>: the width of the figure in pixels
- <code>height</code>: the height of the figure in pixels
- <code>autosize</code>: needs to be <code>False</code> if we want to set the width and height manually
- <code>margin</code>: dictionary containing the margins. The format is: <code>l</code>, <code>r</code>, <code>t</code>, <code>b</code>: the left, right, top and bottom margins in pixels
- <code>pad</code>: the padding between the plot and the margins in pixels</p>
<p><a href="https://plotly.com/python/setting-graph-size/#adjusting-height-width--margins-with-graph-objects">documentation</a></p>
<h2 id="customize-axes">Customize axes<a class="headerlink" href="#customize-axes" title="Permanent link">&para;</a></h2>
<p>For customizing the axes, we can use the <code>figure.update_xaxes</code> and <code>figure.update_yaxes</code> functions. By default, the functions will update all axes. To update only a specific axis, we can use the <code>row</code> and <code>col</code> parameters. </p>
<p><a href="https://plotly.com/python/reference/layout/xaxis/">axis reference</a></p>
<p>The most important parameters are:
- <code>dtick</code>: the distance between the ticks
- <code>tickvals</code>: the exact values of the ticks. This overrides the <code>dtick</code> parameter.
- <code>title_text</code>: the title of the axis. Note that <strong>this text is only used if the tickavls are set manually</strong>.</p>
<h2 id="legend">Legend<a class="headerlink" href="#legend" title="Permanent link">&para;</a></h2>
<p><a href="https://plotly.com/python/legend/">documentation</a>
<a href="https://plotly.com/python/reference/layout/#layout-legend">reference</a></p>
<p>The legend can be styled using the <code>figure.update_layout</code> function. 
The most important parameters are:
- <code>legend_title_text</code>: the title of the legend
- <code>legend</code>: dictionary containing many parameters
    - <code>orientation</code>: <code>h</code> or <code>v</code> for horizontal or vertical legend
    - <code>x</code>, <code>y</code>: the position of the legend from the bottom left corner of the figure
    - <code>xanchor</code>, <code>yanchor</code>: the position of the legend box relative to the x and y coordinates
    - <code>title</code>: if string, the title of the legend (equivalent to the <code>legend_title_text</code> parameter). If dictionary, multiple legent title parameters can be set.</p>
<p>Unfortunately, <strong>there is no way how to customize the padding between the legend items and the legend box</strong>. </p>
<h3 id="hide-legend">Hide legend<a class="headerlink" href="#hide-legend" title="Permanent link">&para;</a></h3>
<p>To hide the legend, we can use the <code>showlegend</code> parameter. Example:</p>
<pre><code class="language-python">fig.update_layout(showlegend=False)
</code></pre>
<h2 id="adding-figure-annotations">Adding Figure Annotations<a class="headerlink" href="#adding-figure-annotations" title="Permanent link">&para;</a></h2>
<p>For adding annotations to the whole Figure, we can use the <a href="https://plotly.com/python-api-reference/generated/plotly.graph_objects.Figure.html#plotly.graph_objects.Figure.add_annotation"><code>add_annotation</code></a> function. </p>
<p>Important parameters:
- <code>x</code>, <code>y</code>: the x and y coordinates of the annotation
- <code>text</code>: the text of the annotation
- <code>xref</code>, <code>yref</code>: the coordinate system of the x and y coordinates. Can be <code>"paper"</code> or <code>"data"</code>.
- <code>showarrow</code>: if <code>True</code>, an arrow will be added to the annotation
- <code>textangle</code>: the angle of the text in degrees</p>
<p><strong>By default</strong> the annotation is meant to annotate the data. Therefore, <strong>the <code>x</code> and <code>y</code> coordinates use the coordinate system of the data</strong> (x and y axes). To align the annotation with respect to the whole figure, we need to set the <code>xref</code> and <code>yref</code> parameters to <code>"paper"</code>. In this case, the <code>x</code> and <code>y</code> coordinates are in the range <code>[0, 1]</code> and the origin is the bottom left corner of the figure.</p>
<h3 id="annotations-in-facet-plots">Annotations in facet plots<a class="headerlink" href="#annotations-in-facet-plots" title="Permanent link">&para;</a></h3>
<p>When using facet plots, the annotations are added to the whole figure. Therefore, the <code>x</code> and <code>y</code> coordinates are in the range <code>[0, 1]</code> and the origin is the bottom left corner of the figure. To align the annotation with respect to the subplot, we need to set the <code>xref</code> and <code>yref</code> parameters to the x and y axes of the subplot. Example:</p>
<pre><code class="language-python">fig.add_annotation(x=0.5, y=0.5, text=&quot;Title&quot;, xref=&quot;x5&quot;, yref=&quot;y5&quot;, showarrow=False)
</code></pre>
<p>Unfortunately, <strong>there is no way how to set the <code>xref</code> and <code>yref</code> parameters automatically</strong>. Therefore, we need to compute them manually for each annotation.</p>
<h1 id="text">Text<a class="headerlink" href="#text" title="Permanent link">&para;</a></h1>
<p><a href="https://plotly.com/python/text-and-annotations">documentation</a></p>
<h2 id="subscript-and-superscript">Subscript and superscript<a class="headerlink" href="#subscript-and-superscript" title="Permanent link">&para;</a></h2>
<p>To add a subscript or superscript to a text, we can use HTML tags. Example:</p>
<pre><code class="language-python">fig.add_annotation(x=0.5, y=0.5, text=&quot;Title&lt;sub&gt;subscript&lt;/sub&gt;&quot;, xref=&quot;x5&quot;, yref=&quot;y5&quot;, showarrow=False)
</code></pre>
<h1 id="exporting-the-figure">Exporting the Figure<a class="headerlink" href="#exporting-the-figure" title="Permanent link">&para;</a></h1>
<p><a href="https://plotly.com/python/static-image-export/">documentation</a></p>
<p>The static export is handeled using the figure's <code>write_image</code> function. Example:</p>
<pre><code class="language-python">fig.write_image(&quot;figure.png&quot;)
</code></pre>
<p>The output format is determined by the extension.</p>
<p>The margins of the figure should be set for the figure itself, not for the export.</p>
<h2 id="export-hangs-out">Export hangs out<a class="headerlink" href="#export-hangs-out" title="Permanent link">&para;</a></h2>
<p>It can be cause by kaleido. The solution si to install an older version, specifically <code>0.1.0.post1</code>.</p>
<p>https://community.plotly.com/t/static-image-export-hangs-using-kaleido/61519/4</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
