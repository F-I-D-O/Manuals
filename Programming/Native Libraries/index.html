<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Native Libraries - Manuals</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
        <link href="../../extra.css" rel="stylesheet">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Manuals</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Programming <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">C++</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../C%2B%2B/C%20Manual/" class="dropdown-item">C Manual</a>
</li>
            
<li>
    <a href="../C%2B%2B/C%2B%2B%20Debugging%20and%20Profiling/" class="dropdown-item">C++ Debugging and Profiling</a>
</li>
            
<li>
    <a href="../C%2B%2B/C%2B%2B%20Manual/" class="dropdown-item">C++ Manual</a>
</li>
            
<li>
    <a href="../C%2B%2B/C%2B%2B%20Workflow/" class="dropdown-item">C++ Workflow</a>
</li>
            
<li>
    <a href="../C%2B%2B/CMake%20Manual/" class="dropdown-item">CMake Manual</a>
</li>
            
<li>
    <a href="../C%2B%2B/Google%20Test/" class="dropdown-item">Google Test</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Cloud computing</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../Cloud%20computing/Lmod/" class="dropdown-item">Lmod</a>
</li>
            
<li>
    <a href="../Cloud%20computing/RCI%20cluster/" class="dropdown-item">RCI cluster</a>
</li>
            
<li>
    <a href="../Cloud%20computing/Slurm/" class="dropdown-item">Slurm</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Database</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../Database/Database%20Workflow/" class="dropdown-item">Database Workflow</a>
</li>
            
<li>
    <a href="../Database/PostgreSQL%20Debugging%20and%20Profiling/" class="dropdown-item">PostgreSQL Debugging and Profiling</a>
</li>
            
<li>
    <a href="../Database/PostgreSQL%20Manual/" class="dropdown-item">PostgreSQL Manual</a>
</li>
            
<li>
    <a href="../Database/SQL%20Manual/" class="dropdown-item">SQL Manual</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Java</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../Java/Debugging%20Java/" class="dropdown-item">Debugging Java</a>
</li>
            
<li>
    <a href="../Java/Jackson/" class="dropdown-item">Jackson</a>
</li>
            
<li>
    <a href="../Java/Java%20Manual/" class="dropdown-item">Java Manual</a>
</li>
            
<li>
    <a href="../Java/Java%20Workflow/" class="dropdown-item">Java Workflow</a>
</li>
            
<li>
    <a href="../Java/Maven/" class="dropdown-item">Maven</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Python</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../Python/Matplotlib%20Manual/" class="dropdown-item">Matplotlib Manual</a>
</li>
            
<li>
    <a href="../Python/Pandas%20Manual/" class="dropdown-item">Pandas Manual</a>
</li>
            
<li>
    <a href="../Python/Plotly%20Manual/" class="dropdown-item">Plotly Manual</a>
</li>
            
<li>
    <a href="../Python/Python%20Debugging/" class="dropdown-item">Python Debugging</a>
</li>
            
<li>
    <a href="../Python/Python%20Manual/" class="dropdown-item">Python Manual</a>
</li>
            
<li>
    <a href="../Python/Python%20Workflow/" class="dropdown-item">Python Workflow</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Web</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../Web/CSS%20Manual/" class="dropdown-item">CSS Manual</a>
</li>
            
<li>
    <a href="../Web/css/" class="dropdown-item">css</a>
</li>
            
<li>
    <a href="../Web/Google%20API%20and%20Apps%20Script/" class="dropdown-item">Google API and Apps Script</a>
</li>
            
<li>
    <a href="../Web/htaccess/" class="dropdown-item">htaccess</a>
</li>
            
<li>
    <a href="../Web/JavaScript/" class="dropdown-item">JavaScript</a>
</li>
            
<li>
    <a href="../Web/Jekyll/" class="dropdown-item">Jekyll</a>
</li>
            
<li>
    <a href="../Web/mkdocs/" class="dropdown-item">mkdocs</a>
</li>
            
<li>
    <a href="../Web/Selenium/" class="dropdown-item">Selenium</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../Common/" class="dropdown-item">Common</a>
</li>
                                    
<li>
    <a href="../Git/" class="dropdown-item">Git</a>
</li>
                                    
<li>
    <a href="../Gurobi/" class="dropdown-item">Gurobi</a>
</li>
                                    
<li>
    <a href="../HDF/" class="dropdown-item">HDF</a>
</li>
                                    
<li>
    <a href="../JSON/" class="dropdown-item">JSON</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Native Libraries</a>
</li>
                                    
<li>
    <a href="../Perl/" class="dropdown-item">Perl</a>
</li>
                                    
<li>
    <a href="../Regex/" class="dropdown-item">Regex</a>
</li>
                                    
<li>
    <a href="../Ruby%20Workflow/" class="dropdown-item">Ruby Workflow</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">LaTeX <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../LaTeX/Latex%20manual/" class="dropdown-item">Latex manual</a>
</li>
                                    
<li>
    <a href="../../LaTeX/LaTeX%20workflow/" class="dropdown-item">LaTeX workflow</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Linux <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Linux/Linux%20Manual/" class="dropdown-item">Linux Manual</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Windows <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Windows/Excel%20Manual/" class="dropdown-item">Excel Manual</a>
</li>
                                    
<li>
    <a href="../../Windows/PowerPoint/" class="dropdown-item">PowerPoint</a>
</li>
                                    
<li>
    <a href="../../Windows/Powershell%20Manual/" class="dropdown-item">Powershell Manual</a>
</li>
                                    
<li>
    <a href="../../Windows/VSCode/" class="dropdown-item">VSCode</a>
</li>
                                    
<li>
    <a href="../../Windows/Windows%20Manual/" class="dropdown-item">Windows Manual</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Audio & Video <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Audio%20%26%20Video/FFMpeg/" class="dropdown-item">FFMpeg</a>
</li>
                                    
<li>
    <a href="../../Audio%20%26%20Video/VLC/" class="dropdown-item">VLC</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">GIS <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../GIS/GIS%20formats/" class="dropdown-item">GIS formats</a>
</li>
                                    
<li>
    <a href="../../GIS/Overpass%20Manual/" class="dropdown-item">Overpass Manual</a>
</li>
                                    
<li>
    <a href="../../GIS/QGIS/" class="dropdown-item">QGIS</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Images <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Images/Midjourney/" class="dropdown-item">Midjourney</a>
</li>
                                    
<li>
    <a href="../../Images/Photopea/" class="dropdown-item">Photopea</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../Arxiv/" class="nav-link">Arxiv</a>
                            </li>
                            <li class="navitem">
                                <a href="../../Google%20office%20apps/" class="nav-link">Google office apps</a>
                            </li>
                            <li class="navitem">
                                <a href="../../Hardware%20Manual/" class="nav-link">Hardware Manual</a>
                            </li>
                            <li class="navitem">
                                <a href="../.." class="nav-link">index</a>
                            </li>
                            <li class="navitem">
                                <a href="../../Markdown/" class="nav-link">Markdown</a>
                            </li>
                            <li class="navitem">
                                <a href="../../Network/" class="nav-link">Network</a>
                            </li>
                            <li class="navitem">
                                <a href="../../Security/" class="nav-link">Security</a>
                            </li>
                            <li class="navitem">
                                <a href="../../vscode/" class="nav-link">vscode</a>
                            </li>
                            <li class="navitem">
                                <a href="../../Web%20Tricks/" class="nav-link">Web Tricks</a>
                            </li>
                            <li class="navitem">
                                <a href="../../XML/" class="nav-link">XML</a>
                            </li>
                            <li class="navitem">
                                <a href="../../YAML/" class="nav-link">YAML</a>
                            </li>
                            <li class="navitem">
                                <a href="../../Zotero/" class="nav-link">Zotero</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../JSON/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../Perl/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#deciding-between-static-and-dynamic-libraries" class="nav-link">Deciding between static and dynamic libraries</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#runing-a-program-depending-on-a-native-library" class="nav-link">Runing a program depending on a native library</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p>Native libraries are an important part of programming in most languages. They allow us to run the code without the need for an interpreter or virtual machine. </p>
<p>Native libraries can be written in any language that can be compiled to machine code. This includes C, C++, Rust, and many others.</p>
<p>There are two ways how to link a native library to your code: statically and dynamically:</p>
<ul>
<li><em>Static libraries</em> are linked at compile time. This means that the library code is included in the final executable. This makes the executable larger, but it also means that the executable is self-contained and does not require the library to be installed on the target system.</li>
<li><em>Dynamic libraries</em> are usually linked at runtime. This means that the library code is not included in the final executable. Instead, the executable loads the library code from a separate file when it is run. This makes the executable smaller, but it also means that the library must be installed on the target system.</li>
</ul>
<p>Each operating system has its own way of loading and using native libraries. Also,  The following table shows the extension of the library file for each operating system:</p>
<table>
<thead>
<tr>
<th>Operating System</th>
<th>Static Library Extension</th>
<th>Dynamic (shared) Library Extension</th>
</tr>
</thead>
<tbody>
<tr>
<td>Windows</td>
<td>.lib</td>
<td>.dll</td>
</tr>
<tr>
<td>Linux</td>
<td>.a</td>
<td>.so</td>
</tr>
</tbody>
</table>
<h1 id="deciding-between-static-and-dynamic-libraries">Deciding between static and dynamic libraries<a class="headerlink" href="#deciding-between-static-and-dynamic-libraries" title="Permanent link">&para;</a></h1>
<p>When deciding between static and dynamic libraries, there are a few things to consider:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Static Libraries</th>
<th>Dynamic Libraries</th>
</tr>
</thead>
<tbody>
<tr>
<td>Memory footprint</td>
<td>Each executable includes a copy of all used library code</td>
<td>All executables share the same copy of the library code</td>
</tr>
<tr>
<td>Modularity</td>
<td>None</td>
<td>We can extend the functionality of the program by adding new shared libraries</td>
</tr>
<tr>
<td>Licensing</td>
<td>Some licenses (e.g. GPL) require that the source code of the library is made available if the library is linked statically</td>
<td>The library can be linked dynamically without having to make the source code available</td>
</tr>
<tr>
<td>Symbol export</td>
<td>All symbols are exported by default</td>
<td>Only symbols marked for export are exported</td>
</tr>
<tr>
<td>Linking of transitive dependencies</td>
<td>All transitive dependencies must be linked explicitly</td>
<td>Transitive dependencies are loaded automatically at runtime</td>
</tr>
</tbody>
</table>
<p>Historically, there were other factors that are not relevant anymore:</p>
<ul>
<li><em>Size</em>: The historical argument was that dynamic libraries can save disk space because only one copy of the library is needed in the system. However, a) disk space is cheap now and b) dynamic libraries are now distributed with the application on many platforms.</li>
<li><em>Maintenance</em>: The historical argument was that dynamic libraries are easier to maintain because they can be updated without recompiling the application and distributing a new version. However, this is now not true because on many platforms the dynamic libraries are distributed with the application.</li>
<li><em>Portability</em>: The historical argument was that static libraries are more portable because they do not depend on the presence of the library on the target system. However, we can distribute dynamic libraries with the application to mitigate this issue of dynamic libraries.</li>
</ul>
<p>So finally, how to decide between static and dynamic libraries? </p>
<ul>
<li>We create a library that will be used by many applications, and it is large -&gt; dynamic libraries.</li>
<li>We use a GPL library and we do not want to make the source code available -&gt; dynamic libraries.</li>
<li>Users are expected to only use a fraction of the library -&gt; static libraries.</li>
<li>Otherwise -&gt; it does not matter.</li>
</ul>
<h1 id="runing-a-program-depending-on-a-native-library">Runing a program depending on a native library<a class="headerlink" href="#runing-a-program-depending-on-a-native-library" title="Permanent link">&para;</a></h1>
<p>When running a program that depends on a native library, the operating system must be able to find the library. This search has a special logic and, most importantly, <strong>there is no guarantee</strong> that</p>
<ul>
<li>the library found is the one that the program was compiled and linked against, or</li>
<li>that the library will be found at all.</li>
</ul>
<p>A typical problem scenario:</p>
<ol>
<li>The program is compiled and linked against a new version of the library.</li>
<li>An older version of the library is installed in a location that is searched before the location of the new version.</li>
<li>The library API has changed between the two versions.</li>
<li>The program crashes at runtime</li>
</ol>
<p>The <strong>search order</strong> differs between operating systems. Here, we present only the  short (incomplete) order. See official documentation (<a href="https://learn.microsoft.com/en-us/windows/win32/dlls/dynamic-link-library-search-order">Windows</a>) for full version. On Windows:</p>
<ol>
<li>The directory containing the executable</li>
<li>The system directory and the Windows directory</li>
<li>The CWD (folder where the program is run)</li>
<li>The directories listed in the PATH environment variable in the order they are listed</li>
</ol></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
