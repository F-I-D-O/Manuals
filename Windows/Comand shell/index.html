<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Comand shell - Manuals</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../../extra.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Manuals</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Programming</a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">C++</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Programming/C%2B%2B/C%20Manual/" class="dropdown-item">C Manual</a>
</li>
            
<li>
    <a href="../../Programming/C%2B%2B/C%2B%2B%20Debugging%20and%20Profiling/" class="dropdown-item">C++ Debugging and Profiling</a>
</li>
            
<li>
    <a href="../../Programming/C%2B%2B/C%2B%2B%20Manual/" class="dropdown-item">C++ Manual</a>
</li>
            
<li>
    <a href="../../Programming/C%2B%2B/C%2B%2B%20Workflow/" class="dropdown-item">C++ Workflow</a>
</li>
            
<li>
    <a href="../../Programming/C%2B%2B/CMake%20Manual/" class="dropdown-item">CMake Manual</a>
</li>
            
<li>
    <a href="../../Programming/C%2B%2B/Google%20Test/" class="dropdown-item">Google Test</a>
</li>
            
<li>
    <a href="../../Programming/C%2B%2B/vcpkg%20Manual/" class="dropdown-item">vcpkg Manual</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Cloud computing</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Programming/Cloud%20computing/Lmod/" class="dropdown-item">Lmod</a>
</li>
            
<li>
    <a href="../../Programming/Cloud%20computing/RCI%20cluster/" class="dropdown-item">RCI cluster</a>
</li>
            
<li>
    <a href="../../Programming/Cloud%20computing/Slurm/" class="dropdown-item">Slurm</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Database</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Programming/Database/Database%20Workflow/" class="dropdown-item">Database Workflow</a>
</li>
            
<li>
    <a href="../../Programming/Database/PostgreSQL%20Debugging%20and%20Profiling/" class="dropdown-item">PostgreSQL Debugging and Profiling</a>
</li>
            
<li>
    <a href="../../Programming/Database/PostgreSQL%20Manual/" class="dropdown-item">PostgreSQL Manual</a>
</li>
            
<li>
    <a href="../../Programming/Database/SQL%20Manual/" class="dropdown-item">SQL Manual</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Java</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Programming/Java/Debugging%20Java/" class="dropdown-item">Debugging Java</a>
</li>
            
<li>
    <a href="../../Programming/Java/Jackson/" class="dropdown-item">Jackson</a>
</li>
            
<li>
    <a href="../../Programming/Java/Java%20Manual/" class="dropdown-item">Java Manual</a>
</li>
            
<li>
    <a href="../../Programming/Java/Java%20Workflow/" class="dropdown-item">Java Workflow</a>
</li>
            
<li>
    <a href="../../Programming/Java/Maven/" class="dropdown-item">Maven</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Python</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Programming/Python/Matplotlib%20Manual/" class="dropdown-item">Matplotlib Manual</a>
</li>
            
<li>
    <a href="../../Programming/Python/Pandas%20Manual/" class="dropdown-item">Pandas Manual</a>
</li>
            
<li>
    <a href="../../Programming/Python/Plotly%20Manual/" class="dropdown-item">Plotly Manual</a>
</li>
            
<li>
    <a href="../../Programming/Python/Python%20Debugging/" class="dropdown-item">Python Debugging</a>
</li>
            
<li>
    <a href="../../Programming/Python/Python%20Manual/" class="dropdown-item">Python Manual</a>
</li>
            
<li>
    <a href="../../Programming/Python/Python%20Workflow/" class="dropdown-item">Python Workflow</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Web</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Programming/Web/CSS%20Manual/" class="dropdown-item">CSS Manual</a>
</li>
            
<li>
    <a href="../../Programming/Web/css/" class="dropdown-item">css</a>
</li>
            
<li>
    <a href="../../Programming/Web/Google%20API%20and%20Apps%20Script/" class="dropdown-item">Google API and Apps Script</a>
</li>
            
<li>
    <a href="../../Programming/Web/htaccess/" class="dropdown-item">htaccess</a>
</li>
            
<li>
    <a href="../../Programming/Web/JavaScript/" class="dropdown-item">JavaScript</a>
</li>
            
<li>
    <a href="../../Programming/Web/Jekyll/" class="dropdown-item">Jekyll</a>
</li>
            
<li>
    <a href="../../Programming/Web/mkdocs/" class="dropdown-item">mkdocs</a>
</li>
            
<li>
    <a href="../../Programming/Web/Selenium/" class="dropdown-item">Selenium</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../../Programming/Common/" class="dropdown-item">Common</a>
</li>
                                    
<li>
    <a href="../../Programming/Git/" class="dropdown-item">Git</a>
</li>
                                    
<li>
    <a href="../../Programming/Gurobi/" class="dropdown-item">Gurobi</a>
</li>
                                    
<li>
    <a href="../../Programming/HDF/" class="dropdown-item">HDF</a>
</li>
                                    
<li>
    <a href="../../Programming/JSON/" class="dropdown-item">JSON</a>
</li>
                                    
<li>
    <a href="../../Programming/Native%20Libraries/" class="dropdown-item">Native Libraries</a>
</li>
                                    
<li>
    <a href="../../Programming/Neural%20Networks/" class="dropdown-item">Neural Networks</a>
</li>
                                    
<li>
    <a href="../../Programming/Perl/" class="dropdown-item">Perl</a>
</li>
                                    
<li>
    <a href="../../Programming/Regex/" class="dropdown-item">Regex</a>
</li>
                                    
<li>
    <a href="../../Programming/Ruby%20Workflow/" class="dropdown-item">Ruby Workflow</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">LaTeX</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../LaTeX/Latex%20manual/" class="dropdown-item">Latex manual</a>
</li>
                                    
<li>
    <a href="../../LaTeX/LaTeX%20workflow/" class="dropdown-item">LaTeX workflow</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Linux</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Linux/Linux%20Manual/" class="dropdown-item">Linux Manual</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Windows</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Comand shell</a>
</li>
                                    
<li>
    <a href="../Excel%20Manual/" class="dropdown-item">Excel Manual</a>
</li>
                                    
<li>
    <a href="../PowerPoint/" class="dropdown-item">PowerPoint</a>
</li>
                                    
<li>
    <a href="../Powershell%20Manual/" class="dropdown-item">Powershell Manual</a>
</li>
                                    
<li>
    <a href="../VSCode/" class="dropdown-item">VSCode</a>
</li>
                                    
<li>
    <a href="../Windows%20Manual/" class="dropdown-item">Windows Manual</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">.cursor</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../.." class="dropdown-item">rules</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Audio & Video</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Audio%20%26%20Video/FFMpeg/" class="dropdown-item">FFMpeg</a>
</li>
                                    
<li>
    <a href="../../Audio%20%26%20Video/VLC/" class="dropdown-item">VLC</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">GIS</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../GIS/GIS%20formats/" class="dropdown-item">GIS formats</a>
</li>
                                    
<li>
    <a href="../../GIS/Overpass%20Manual/" class="dropdown-item">Overpass Manual</a>
</li>
                                    
<li>
    <a href="../../GIS/QGIS/" class="dropdown-item">QGIS</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Images</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Images/Midjourney/" class="dropdown-item">Midjourney</a>
</li>
                                    
<li>
    <a href="../../Images/Photopea/" class="dropdown-item">Photopea</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="../../Arxiv/" class="nav-link">Arxiv</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../Google%20office%20apps/" class="nav-link">Google office apps</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../Hardware%20Manual/" class="nav-link">Hardware Manual</a>
                            </li>
                            <li class="nav-item">
                                <a href="../.." class="nav-link">index</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../Markdown/" class="nav-link">Markdown</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../Network/" class="nav-link">Network</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../Security/" class="nav-link">Security</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../vscode/" class="nav-link">vscode</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../Web%20Tricks/" class="nav-link">Web Tricks</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../XML/" class="nav-link">XML</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../YAML/" class="nav-link">YAML</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../Zotero/" class="nav-link">Zotero</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../../Linux/Linux%20Manual/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../Excel%20Manual/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#introduction" class="nav-link">Introduction</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#comments" class="nav-link">Comments</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#echo-displaying-text-and-automatic-command-printing" class="nav-link">echo: Displaying text and automatic command printing</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#executable-execution" class="nav-link">Executable Execution</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#executable-path-resolution" class="nav-link">Executable path resolution</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#variables" class="nav-link">Variables</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#the-set-command-and-its-important-nuances" class="nav-link">The set command and its important nuances</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#string-manipulation" class="nav-link">String Manipulation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#control-statements" class="nav-link">Control Statements</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#if" class="nav-link">if</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#goto" class="nav-link">goto</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#output-redirection" class="nav-link">Output redirection</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#command-separation" class="nav-link">Command Separation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#batch-script-arguments" class="nav-link">Batch Script Arguments</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#parameter-extension-for-files" class="nav-link">Parameter extension for files</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#usefull-commands" class="nav-link">Usefull Commands</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#get-the-path-of-the-executablecommand" class="nav-link">Get the path of the executable/command</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#findstr-select-lines-containing-a-pattern" class="nav-link">findstr: Select lines containing a pattern</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#mklink-create-a-symlink" class="nav-link">mklink: Create a symlink</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#limitations" class="nav-link">Limitations</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Cmd.exe">wiki cmd.exe</a></li>
<li><a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/windows-commands">Windows Commands Overview and Reference</a></li>
<li><a href="https://en.wikibooks.org/wiki/Windows_Batch_Scripting">Wikibook</a></li>
</ul>
<p>Command shell is the basic shell in Windows and one of the two preinstalled shells (the other is PowerShell).</p>
<p>The commands available in the Command shell are refered to as <em>Windows commands</em>.</p>
<p>As the PowerShell was designed as an extension of the Command shell, <strong>the Windows commands can be executed in PowerShell</strong>.</p>
<p>Script files for the Command shell are often called <a href="https://en.wikipedia.org/wiki/Batch_file">batch files</a>, and have the <code>.bat</code> or <code>.cmd</code> extension.</p>
<h1 id="comments">Comments<a class="headerlink" href="#comments" title="Permanent link">&para;</a></h1>
<p>Instead of some conventional comment syntax, the Command shell uses the <a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/rem"><code>rem</code></a> command. Example:</p>
<pre><code class="language-batch">rem This is a comment. We print Hello, World! below it.
echo Hello, World!
</code></pre>
<h1 id="echo-displaying-text-and-automatic-command-printing"><code>echo</code>: Displaying text and automatic command printing<a class="headerlink" href="#echo-displaying-text-and-automatic-command-printing" title="Permanent link">&para;</a></h1>
<p>The <a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/echo"><code>echo</code></a> command serve two important purposes:</p>
<ul>
<li>displaying text, like in PowerShell and</li>
<li>switching on/off the automatic command printing feature of the Command shell.</li>
</ul>
<p>The automatic command printing basically prints every command that is executed. We can skip the printing by prefixing the command with <code>@</code>. Example:</p>
<pre><code class="language-batch">echo Hello, World! # prints echo Hello, World!\nHello, World!
@echo Hello, World! # prints Hello, World!
</code></pre>
<p>However, typically, we want to disable the automatic command printing for the whole script, this can be done by adding call <code>echo</code> with parameter <code>off</code>. To turn it back on, we can call <code>echo</code> with parameter <code>on</code>. So the typical first command in a batch file is:</p>
<pre><code class="language-batch">@echo off 
</code></pre>
<p>Which disables the automatic command printing and also skips it for the disabeling command itself.</p>
<h1 id="executable-execution">Executable Execution<a class="headerlink" href="#executable-execution" title="Permanent link">&para;</a></h1>
<h2 id="executable-path-resolution">Executable path resolution<a class="headerlink" href="#executable-path-resolution" title="Permanent link">&para;</a></h2>
<p><a href="https://learn.microsoft.com/en-us/previous-versions//cc723564(v=technet.10)#command-search-sequence">Old reference for Windows NT</a></p>
<p>Unfortunatelly, there is no up-to-date reference for Command Shell execution logic. However, using the information from the old reference, the execution logic is as follows:</p>
<ul>
<li>If the specified executable is a path, the path is evaluated. If the path is valid, the executable is executed. Otherwise, error is raised.</li>
<li>If the specified executable is a name, the name is searched in the locations below (in order):<ol>
<li>Windows Commands</li>
<li>Current directory</li>
<li>directories listed in the <code>PATH</code> environment variable, in the order they are listed</li>
</ol>
</li>
</ul>
<p>When we mention the executable name, we mean the name of the executable file with the extension. Executables names can be also specified without the extension, but only if the extension is listed in the <code>PATHEXT</code> environment variable.</p>
<h1 id="variables">Variables<a class="headerlink" href="#variables" title="Permanent link">&para;</a></h1>
<p><strong>Variables are set</strong> using the <a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/set_1"><code>set</code></a> command. Example:</p>
<pre><code class="language-batch">set myVar=Hello
</code></pre>
<p>To <strong>use a variable</strong>, we use its name surrounded by <code>%</code>. Example:</p>
<pre><code class="language-batch">echo %myVar%
rem prints Hello
</code></pre>
<p>To <strong>display all variables</strong>, use the <code>set</code> command without any arguments.</p>
<p>Note that unlike in PowerShell, <strong>there is no distinction between local and environment variables</strong>. For example, to set the value of the <code>PATH</code> environment variable, we can use the <code>set</code> command:</p>
<pre><code class="language-batch">set PATH=C:\Program Files\Java\jdk1.8.0_181\bin;%PATH%
</code></pre>
<h2 id="the-set-command-and-its-important-nuances">The <code>set</code> command and its important nuances<a class="headerlink" href="#the-set-command-and-its-important-nuances" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/set_1">official documentation</a></li>
<li><a href="https://ss64.com/nt/set.html">ss64 documentation</a></li>
</ul>
<p>The variable setting has several surprising nuances with important consequences:</p>
<ul>
<li>
<p>all whitespaces are interpreted and not discarded:
    ```batch
    set myVar=Hello
    rem variable 'myVar' is set to 'Hello'</p>
<p>set myVar= Hello
rem variable 'myVar' is set to ' Hello'</p>
<p>set myVar =Hello
rem variable 'myVar ' is set to 'Hello'
```</p>
</li>
<li>
<p>The quoting for set use a different syntax than expected:</p>
<p>```batch
set myVar="Hello, World!"
rem myVar is set to '"Hello, World!"'</p>
<p>set "myVar=Hello, World!" 
rem myVar is set to 'Hello, World!'
<code>- no quoting is needed for spaces in the value:</code>batch
set myVar=Hello World!
rem myVar is set to 'Hello World!'
```</p>
</li>
</ul>
<h1 id="string-manipulation">String Manipulation<a class="headerlink" href="#string-manipulation" title="Permanent link">&para;</a></h1>
<p>Unlike in PowerShell or programming languages, there is no concatenation operator in Command Shell. Instead, we just place the strings/variables next to each other. Example:</p>
<pre><code class="language-batch">set myVar=Hello, 
set myVar=%myVar% World!
echo %myVar% # prints &quot;Hello, World!&quot;
</code></pre>
<h1 id="control-statements">Control Statements<a class="headerlink" href="#control-statements" title="Permanent link">&para;</a></h1>
<h2 id="if"><code>if</code><a class="headerlink" href="#if" title="Permanent link">&para;</a></h2>
<p><a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/if">documentation</a></p>
<p>The <code>if</code> statement has the following syntax:</p>
<pre><code class="language-batch">if &lt;condition&gt; &lt;then command&gt; [else &lt;command&gt;]
</code></pre>
<p>There are three types of conditions:</p>
<ul>
<li><code>&lt;string 1&gt;==&lt;string 2&gt;</code>: most useful,</li>
<li><code>ERRORLEVEL &lt;number&gt;</code>: test the return value of the last command, and</li>
<li><code>exists &lt;file&gt;</code>: test if the file exists</li>
</ul>
<p>Any of the conditions can be negated by using <code>if not</code> instead of <code>if</code>.</p>
<h2 id="goto"><code>goto</code><a class="headerlink" href="#goto" title="Permanent link">&para;</a></h2>
<p><a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/goto">documentation</a></p>
<p>The <code>goto</code> statement has the following syntax:</p>
<pre><code class="language-batch">goto &lt;label&gt;
</code></pre>
<p>The <code>&lt;label&gt;</code> is then prese in the script as <code>:&lt;label&gt;</code>. Example:</p>
<pre><code class="language-batch">goto label

...

:label
echo Hello, World!
</code></pre>
<h1 id="output-redirection">Output redirection<a class="headerlink" href="#output-redirection" title="Permanent link">&para;</a></h1>
<p><a href="https://www.robvanderwoude.com/redirection.php">unofficial documentation</a></p>
<p>The <code>|</code> operator is used to redirect the standard output of a command to the input of another command as usual.</p>
<p>The <code>&gt;</code> is used to redirect the standard output of a command to a file. By prependind <code>2</code>  (<code>2&gt;</code>), we redirect the standard error output instead. When changing <code>&gt;</code> to <code>&gt;&gt;</code>, we write to the file in the append mode.</p>
<p>Using <code>&lt;</code> we can redirect a file to the standard input of a command.</p>
<p>Finally, <code>2&gt;&amp;1</code> redirects the standard error output to the standard output. This can be combined with the output to file: <code>&lt;command&gt; &gt; &lt;file&gt; 2&gt;&amp;1</code> writes both the standard output and the standard error output to the file.</p>
<p>As any <code>&lt;file&gt;</code> we can use <code>NUL</code> which basically discards the output.</p>
<h1 id="command-separation">Command Separation<a class="headerlink" href="#command-separation" title="Permanent link">&para;</a></h1>
<p>We can execute multiple commands in the same line. We can use</p>
<ul>
<li><code>&lt;command 1&gt; &amp; &lt;command 2&gt;</code>: commands are executed independently, or</li>
<li><code>&lt;command 1&gt; &amp;&amp; &lt;command 2&gt;</code>: <code>&lt;command 2&gt;</code> is executed only if <code>&lt;command 1&gt;</code> exits with code 0.</li>
</ul>
<h1 id="batch-script-arguments">Batch Script Arguments<a class="headerlink" href="#batch-script-arguments" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="https://en.wikibooks.org/wiki/Windows_Batch_Scripting#Command-line_arguments">wikibook</a></li>
<li><a href="https://ss64.com/nt/syntax-args.html">ss64 documentation</a></li>
</ul>
<p>When we call commands from a batch script, we can refer to the called arguments called <em>replacement parameters</em>. These are <code>%0</code> (the name of the script), <code>%1</code>--<code>%9</code> (the arguments of the script). To refer all script arguments (<code>%1</code>--<code>%9</code>), we can use <code>%*</code>.</p>
<p>Contrary to a typical programming language behavior, the <strong>arguments are not split just by spaces</strong> but also commas (<code>,</code>), semi-colons (<code>;</code>), equal signs (<code>=</code>), and by a horizontal tab. Therefore, one has to be careful if some of these characters are used in the arguments.</p>
<h2 id="parameter-extension-for-files">Parameter extension for files<a class="headerlink" href="#parameter-extension-for-files" title="Permanent link">&para;</a></h2>
<p>If the argument is a file name, we can get several additional information about the file by applying parameters extensions. These extensions are in format <code>~&lt;extension&gt;</code> where <code>&lt;extension&gt;</code> is a single letter long and are placed between the <code>%</code> and the parameter number. Example:</p>
<pre><code class="language-batch">echo %~f1
</code></pre>
<p>The above command prints the full path of the file passed as the first argument.</p>
<p>Most commonly used extensions are:</p>
<ul>
<li><code>~</code>: remove any surrounding quotes</li>
<li><code>~f</code>: full path</li>
<li><code>~d</code>: drive letter</li>
<li><code>~p</code>: path, without the drive letter and the file name</li>
</ul>
<p>We can also combine some extensions:</p>
<pre><code class="language-batch">echo %~dp1
</code></pre>
<p>The above command prints the directory of the file passed as the first argument.</p>
<h1 id="usefull-commands">Usefull Commands<a class="headerlink" href="#usefull-commands" title="Permanent link">&para;</a></h1>
<h2 id="get-the-path-of-the-executablecommand">Get the path of the executable/command<a class="headerlink" href="#get-the-path-of-the-executablecommand" title="Permanent link">&para;</a></h2>
<p>To get the path of the executable/command, we can use the <code>where</code> command. Example:</p>
<pre><code class="language-batch">where java
</code></pre>
<p>If there are more than one executable/command with the same name, all are listed (one per line), from the one to be executed, to the one with the lowest priority.</p>
<h2 id="findstr-select-lines-containing-a-pattern"><code>findstr</code>: Select lines containing a pattern<a class="headerlink" href="#findstr-select-lines-containing-a-pattern" title="Permanent link">&para;</a></h2>
<p>The <a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/findstr"><code>findstr</code></a> command is used to select lines containing a pattern. It is similar to the grep or <code>Select-String</code> in PowerShell. However, it can only ever select the whole line, not parts of it.</p>
<p>The command can either:</p>
<ul>
<li>read from a file: <code>findstr &lt;pattern&gt; &lt;file&gt;</code>, or</li>
<li>read from the standard input: <code>&lt;command&gt; | findstr &lt;pattern&gt;</code>.</li>
</ul>
<p>By default, the pattern is interpreted as a regular expression. However, <code>findstr</code> has a plenty of options to configure the matching:</p>
<ul>
<li><code>/i</code>: ignore case</li>
<li><code>/c:&lt;pattern&gt;</code>: use a literal pattern, instead of a regular expression</li>
</ul>
<h2 id="mklink-create-a-symlink"><code>mklink</code>: Create a symlink<a class="headerlink" href="#mklink-create-a-symlink" title="Permanent link">&para;</a></h2>
<p>The <a href="https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/mklink"><code>mklink</code></a> command is used to create a symlink. Example:</p>
<pre><code class="language-batch">mklink &lt;source&gt; &lt;target&gt;
</code></pre>
<h1 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h1>
<p>The command shell is very limited compared to any other shell that is used in practice. Some of the limitations are:</p>
<ul>
<li>no command for selecting line by a number like head/tail</li>
<li>no command for matching substrings, only whole line can be matched</li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
