<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Overpass Manual - Manuals</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
        <link href="../../extra.css" rel="stylesheet">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Manuals</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Programming <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">C++</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Programming/C%2B%2B/C%2B%2B%20Debugging%20and%20Profiling/" class="dropdown-item">C++ Debugging and Profiling</a>
</li>
            
<li>
    <a href="../../Programming/C%2B%2B/C%2B%2B%20Manual/" class="dropdown-item">C++ Manual</a>
</li>
            
<li>
    <a href="../../Programming/C%2B%2B/C%2B%2B%20Workflow/" class="dropdown-item">C++ Workflow</a>
</li>
            
<li>
    <a href="../../Programming/C%2B%2B/CMake%20Manual/" class="dropdown-item">CMake Manual</a>
</li>
            
<li>
    <a href="../../Programming/C%2B%2B/Google%20Test/" class="dropdown-item">Google Test</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Java</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Programming/Java/Debugging%20Java/" class="dropdown-item">Debugging Java</a>
</li>
            
<li>
    <a href="../../Programming/Java/Jackson/" class="dropdown-item">Jackson</a>
</li>
            
<li>
    <a href="../../Programming/Java/Java%20Programming%20Guide/" class="dropdown-item">Java Programming Guide</a>
</li>
            
<li>
    <a href="../../Programming/Java/Java%20Workflow/" class="dropdown-item">Java Workflow</a>
</li>
            
<li>
    <a href="../../Programming/Java/Maven/" class="dropdown-item">Maven</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Python</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Programming/Python/Matplotlib%20Manual/" class="dropdown-item">Matplotlib Manual</a>
</li>
            
<li>
    <a href="../../Programming/Python/Pandas%20Manual/" class="dropdown-item">Pandas Manual</a>
</li>
            
<li>
    <a href="../../Programming/Python/Plotly%20Manual/" class="dropdown-item">Plotly Manual</a>
</li>
            
<li>
    <a href="../../Programming/Python/Python%20Debugging/" class="dropdown-item">Python Debugging</a>
</li>
            
<li>
    <a href="../../Programming/Python/Python%20Manual/" class="dropdown-item">Python Manual</a>
</li>
            
<li>
    <a href="../../Programming/Python/Python%20Workflow/" class="dropdown-item">Python Workflow</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Web</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../Programming/Web/CSS%20Manual/" class="dropdown-item">CSS Manual</a>
</li>
            
<li>
    <a href="../../Programming/Web/css/" class="dropdown-item">css</a>
</li>
            
<li>
    <a href="../../Programming/Web/Google%20API%20and%20Apps%20Script/" class="dropdown-item">Google API and Apps Script</a>
</li>
            
<li>
    <a href="../../Programming/Web/htaccess/" class="dropdown-item">htaccess</a>
</li>
            
<li>
    <a href="../../Programming/Web/JavaScript/" class="dropdown-item">JavaScript</a>
</li>
            
<li>
    <a href="../../Programming/Web/Jekyll/" class="dropdown-item">Jekyll</a>
</li>
            
<li>
    <a href="../../Programming/Web/mkdocs/" class="dropdown-item">mkdocs</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../../Programming/Common/" class="dropdown-item">Common</a>
</li>
                                    
<li>
    <a href="../../Programming/Git/" class="dropdown-item">Git</a>
</li>
                                    
<li>
    <a href="../../Programming/Gurobi/" class="dropdown-item">Gurobi</a>
</li>
                                    
<li>
    <a href="../../Programming/HDF/" class="dropdown-item">HDF</a>
</li>
                                    
<li>
    <a href="../../Programming/JSON/" class="dropdown-item">JSON</a>
</li>
                                    
<li>
    <a href="../../Programming/Native%20Libraries/" class="dropdown-item">Native Libraries</a>
</li>
                                    
<li>
    <a href="../../Programming/PostgreSQL%20Manual/" class="dropdown-item">PostgreSQL Manual</a>
</li>
                                    
<li>
    <a href="../../Programming/Regex/" class="dropdown-item">Regex</a>
</li>
                                    
<li>
    <a href="../../Programming/Ruby%20Workflow/" class="dropdown-item">Ruby Workflow</a>
</li>
                                    
<li>
    <a href="../../Programming/SQL%20Manual/" class="dropdown-item">SQL Manual</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">LaTeX <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../LaTeX/Latex%20manual/" class="dropdown-item">Latex manual</a>
</li>
                                    
<li>
    <a href="../../LaTeX/LaTeX%20workflow/" class="dropdown-item">LaTeX workflow</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Ubuntu <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Ubuntu/Linux%20Manual/" class="dropdown-item">Linux Manual</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Windows <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Windows/Excel%20Manual/" class="dropdown-item">Excel Manual</a>
</li>
                                    
<li>
    <a href="../../Windows/Powershell%20Manual/" class="dropdown-item">Powershell Manual</a>
</li>
                                    
<li>
    <a href="../../Windows/VSCode/" class="dropdown-item">VSCode</a>
</li>
                                    
<li>
    <a href="../../Windows/Windows%20Manual/" class="dropdown-item">Windows Manual</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Audio & Video <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Audio%20%26%20Video/FFMpeg/" class="dropdown-item">FFMpeg</a>
</li>
                                    
<li>
    <a href="../../Audio%20%26%20Video/VLC/" class="dropdown-item">VLC</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Cloud computing <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Cloud%20computing/Lmod/" class="dropdown-item">Lmod</a>
</li>
                                    
<li>
    <a href="../../Cloud%20computing/RCI%20cluster/" class="dropdown-item">RCI cluster</a>
</li>
                                    
<li>
    <a href="../../Cloud%20computing/Slurm/" class="dropdown-item">Slurm</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">GIS <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="./" class="dropdown-item active">Overpass Manual</a>
</li>
                                    
<li>
    <a href="../QGIS/" class="dropdown-item">QGIS</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Images <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../Images/Midjourney/" class="dropdown-item">Midjourney</a>
</li>
                                    
<li>
    <a href="../../Images/Photopea/" class="dropdown-item">Photopea</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../Arxiv/" class="nav-link">Arxiv</a>
                            </li>
                            <li class="navitem">
                                <a href="../.." class="nav-link">index</a>
                            </li>
                            <li class="navitem">
                                <a href="../../Network/" class="nav-link">Network</a>
                            </li>
                            <li class="navitem">
                                <a href="../../PowerPoint/" class="nav-link">PowerPoint</a>
                            </li>
                            <li class="navitem">
                                <a href="../../Security/" class="nav-link">Security</a>
                            </li>
                            <li class="navitem">
                                <a href="../../vscode/" class="nav-link">vscode</a>
                            </li>
                            <li class="navitem">
                                <a href="../../Web%20Tricks/" class="nav-link">Web Tricks</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../../Cloud%20computing/Slurm/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../QGIS/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#sources" class="nav-link">Sources</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#strucutre" class="nav-link">Strucutre</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#sets" class="nav-link">Sets</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#out-statement" class="nav-link">out statement</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#area-specification" class="nav-link">Area specification</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#filtering" class="nav-link">Filtering</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#selecting-multiple-data-sets" class="nav-link">Selecting Multiple Data Sets</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#union-utatement" class="nav-link">Union Utatement</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#select-area-boundary" class="nav-link">Select Area Boundary</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#discover-the-full-name-of-an-area" class="nav-link">Discover the full name of an area</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#filter-areas-with-duplicite-names" class="nav-link">Filter areas with duplicite names</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#select-area-by-id" class="nav-link">Select area by ID</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#specify-area-with-higher-level-area" class="nav-link">Specify area with higher level area</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#get-historical-data" class="nav-link">Get historical data</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="sources">Sources<a class="headerlink" href="#sources" title="Permanent link">&para;</a></h1>
<ul>
<li><a href="https://wiki.openstreetmap.org/wiki/Overpass_API/Overpass_QL">wiki/Overpass QL</a></li>
</ul>
<h1 id="strucutre">Strucutre<a class="headerlink" href="#strucutre" title="Permanent link">&para;</a></h1>
<p>Every statement ents with <code>;</code>.</p>
<h2 id="sets">Sets<a class="headerlink" href="#sets" title="Permanent link">&para;</a></h2>
<p>Almost all statements works with sets of data. Unless specified, we work with a default set (<code>_</code>).</p>
<p>To wrrito to a specific set, we can use <code>-&gt;.</code> operator: <code>&lt;statement&gt;-&gt;.&lt;set&gt;</code> writes the result of the <code>&lt;statement&gt;</code> to the <set>. The default set can be ommited: <code>&lt;statement&gt;</code> is equal to <code>&lt;statement&gt;-&gt;._</code>.</p>
<h1 id="out-statement"><code>out</code> statement<a class="headerlink" href="#out-statement" title="Permanent link">&para;</a></h1>
<p>All queries should contain an <code>out</code> statement that determines the output format.
- <code>out</code> is used for data only request
- <code>out geom</code> returns data with all elements associated with their geometry.</p>
<p>Note that while the output format can be specified, we cannot filter the output (e.g., <a href="https://gis.stackexchange.com/questions/433800/exclude-filter-relation-members-by-type-or-role">we cannot filter the ralation members</a>).</p>
<h1 id="area-specification">Area specification<a class="headerlink" href="#area-specification" title="Permanent link">&para;</a></h1>
<p>We select an area by name as:</p>
<pre><code>area[&quot;name&quot;=&quot;Letkov&quot;];
</code></pre>
<p>And then we used it as: </p>
<pre><code>node(area);
</code></pre>
<p>If we need more areas in a query, we can store them in variable:</p>
<pre><code>area[&quot;name&quot;=&quot;Letkov&quot;]-&gt;.let;
</code></pre>
<p>And:</p>
<pre><code>node(area.let);
</code></pre>
<p><strong>Important note:</strong> If an area needs to be used repetadly, it has to be named, as the value of <code>area</code> (<code>area._</code>) is replaced by the output of any statement.</p>
<h1 id="filtering">Filtering<a class="headerlink" href="#filtering" title="Permanent link">&para;</a></h1>
<p>filters are specified in brackets:</p>
<pre><code>rel[&quot;admin_level&quot;=8];
</code></pre>
<p>It is also possible to use a regex filtering, we just neeed to replace <code>=</code> with <code>~</code>:</p>
<pre><code>rel[&quot;admin_level&quot;~&quot;.*&quot;];
</code></pre>
<h1 id="selecting-multiple-data-sets">Selecting Multiple Data Sets<a class="headerlink" href="#selecting-multiple-data-sets" title="Permanent link">&para;</a></h1>
<p>Implicitely, all filters are aplied to a default dataset called <code>_</code>  and also written to it. Therefore, we cannot do:</p>
<pre><code>rel[&quot;admin_level&quot;~&quot;.*&quot;];
node;
</code></pre>
<p>because we are basically selecting nodes from a set of relations. Solutions:
1) Union statement
2) Named sets</p>
<h2 id="union-utatement">Union Utatement<a class="headerlink" href="#union-utatement" title="Permanent link">&para;</a></h2>
<p>Union statement is surounded by parantheses. We can achieve the intended behaviour by:</p>
<pre><code>(
rel[&quot;admin_level&quot;~&quot;.*&quot;];
node;
);
</code></pre>
<h1 id="select-area-boundary">Select Area Boundary<a class="headerlink" href="#select-area-boundary" title="Permanent link">&para;</a></h1>
<p>Sometimes, it is usefull to check the boundary of the named area. However, the administrative level differ for various areas cities, countries, so the <code>admin_level</code> relation cannot be used for that. Luckilly, there is an option to use the <code>pivot</code> filter. Example:</p>
<pre><code>area[&quot;name&quot;=&quot;Praha&quot;];
node(pivot);
out geom;
</code></pre>
<h2 id="discover-the-full-name-of-an-area">Discover the full name of an area<a class="headerlink" href="#discover-the-full-name-of-an-area" title="Permanent link">&para;</a></h2>
<p>If we want to know the full name of the area while the above query return multiple results, we can do that in openstreet map:
1. Move the map to see the area
2. Click the button with cusor and question mark to select the exploration tool
3. Click inside the area
4. Scroll down to area relations
5. Click on the proper region
6. The <code>name</code> property is what we are looking for</p>
<h2 id="filter-areas-with-duplicite-names">Filter areas with duplicite names<a class="headerlink" href="#filter-areas-with-duplicite-names" title="Permanent link">&para;</a></h2>
<p>Sometimes, even the full name of the area is not specific enough. In that case, we can use two approaches:
- select the area by the area relation id
- specify the area by the higher level area (state, country)</p>
<h3 id="select-area-by-id">Select area by ID<a class="headerlink" href="#select-area-by-id" title="Permanent link">&para;</a></h3>
<ol>
<li>select the requested area</li>
<li>copy the id and add 3 600 000 000 to it (start with 36 and fill zerose till there are 10 digits in total)</li>
<li>replace <code>area["name"="&lt;NAME&gt;]</code> with <code>area(&lt;ID&gt;)</code>. <strong>Note that round brackets are used instead of square brackets!</strong></li>
</ol>
<h3 id="specify-area-with-higher-level-area">Specify area with higher level area<a class="headerlink" href="#specify-area-with-higher-level-area" title="Permanent link">&para;</a></h3>
<p>In this exaple, we select the Coo County, Illinois.</p>
<pre><code>area[name=&quot;Illinois&quot;];
rel[name=&quot;Cook County&quot;](area);
map_to_area;
node(pivot);
out geom;
</code></pre>
<p><a href="https://dev.overpass-api.de/overpass-doc/en/full_data/area.html">more info</a></p>
<h1 id="get-historical-data">Get historical data<a class="headerlink" href="#get-historical-data" title="Permanent link">&para;</a></h1>
<p>To get historical data, prepend the query with a date statement. Example:</p>
<pre><code>[date:&quot;2016-01-01T00:00:00Z&quot;];
area[name=&quot;City of New York&quot;];
node(pivot);
out geom;
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
